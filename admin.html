<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - GameEDU</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: #f5f5f5;
        min-height: 100vh;
      }

      /* Sidebar */
      .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        width: 250px;
        height: 100vh;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        overflow-y: auto;
      }

      .sidebar-header {
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      }

      .sidebar-logo {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 8px;
      }

      .sidebar-subtitle {
        font-size: 12px;
        opacity: 0.8;
      }

      .nav-menu {
        list-style: none;
      }

      .nav-item {
        margin-bottom: 8px;
      }

      .nav-link {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 16px;
        color: white;
        text-decoration: none;
        border-radius: 8px;
        transition: background 0.2s;
        cursor: pointer;
      }

      .nav-link:hover,
      .nav-link.active {
        background: rgba(255, 255, 255, 0.2);
      }

      .nav-icon {
        font-size: 20px;
      }

      /* Main Content */
      .main-content {
        margin-left: 250px;
        padding: 30px;
      }

      /* Header */
      .page-header {
        background: white;
        padding: 20px 30px;
        border-radius: 12px;
        margin-bottom: 30px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .page-title {
        font-size: 28px;
        font-weight: bold;
        color: #333;
      }

      .user-info {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
      }

      /* Stats Grid */
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .stat-card {
        background: white;
        padding: 24px;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s;
      }

      .stat-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .stat-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
      }

      .stat-title {
        font-size: 14px;
        color: #666;
        font-weight: 500;
      }

      .stat-icon {
        font-size: 32px;
        opacity: 0.8;
      }

      .stat-value {
        font-size: 32px;
        font-weight: bold;
        color: #333;
        margin-bottom: 8px;
      }

      .stat-change {
        font-size: 12px;
        color: #34c759;
      }

      .stat-change.negative {
        color: #ff3b30;
      }

      /* Content Cards */
      .content-card {
        background: white;
        border-radius: 12px;
        padding: 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }

      .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 16px;
        border-bottom: 1px solid #e5e5ea;
      }

      .card-title {
        font-size: 20px;
        font-weight: bold;
        color: #333;
      }

      .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
      }

      .btn-primary {
        background: linear-gradient(135deg, #007aff 0%, #34c759 100%);
        color: white;
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
      }

      /* Table */
      .table-container {
        overflow-x: auto;
      }

      table {
        width: 100%;
        border-collapse: collapse;
      }

      th,
      td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #e5e5ea;
      }

      th {
        background: #f8f9fa;
        font-weight: 600;
        color: #333;
        font-size: 14px;
      }

      td {
        font-size: 14px;
        color: #666;
      }

      .status-badge {
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: bold;
        display: inline-block;
      }

      .status-active {
        background: #d4edda;
        color: #155724;
      }

      .status-upcoming {
        background: #fff3cd;
        color: #856404;
      }

      .status-ended {
        background: #e2e3e5;
        color: #383d41;
      }

      .status-pending {
        background: #fff3cd;
        color: #856404;
      }

      .status-rejected {
        background: #f8d7da;
        color: #721c24;
      }

      .action-buttons {
        display: flex;
        gap: 8px;
      }

      .btn-sm {
        padding: 6px 12px;
        font-size: 12px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
      }

      .btn-edit {
        background: #007aff;
        color: white;
      }

      .btn-delete {
        background: #ff3b30;
        color: white;
      }

      .btn-view {
        background: #34c759;
        color: white;
      }

      .btn-accept {
        background: #34c759;
        color: white;
      }

      .btn-reject {
        background: #ff3b30;
        color: white;
      }

      /* Hidden sections */
      .content-section {
        display: none;
      }

      .content-section.active {
        display: block;
      }

      /* Modal */
      .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 2000;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      .modal-overlay.show {
        display: flex;
      }

      .modal {
        background: white;
        border-radius: 16px;
        width: 100%;
        max-width: 700px;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        position: relative;
      }

      .modal-header {
        padding: 24px;
        border-bottom: 1px solid #e5e5ea;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        background: white;
        z-index: 10;
      }

      .modal-title {
        font-size: 24px;
        font-weight: bold;
        color: #333;
      }

      .modal-close {
        width: 36px;
        height: 36px;
        border: none;
        background: #f5f5f5;
        border-radius: 50%;
        font-size: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.2s;
      }

      .modal-close:hover {
        background: #e5e5ea;
      }

      .modal-body {
        padding: 24px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-label {
        display: block;
        font-size: 14px;
        font-weight: 600;
        color: #333;
        margin-bottom: 8px;
      }

      .form-label.required::after {
        content: " *";
        color: #ff3b30;
      }

      .form-input,
      .form-select,
      .form-textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid #e5e5ea;
        border-radius: 8px;
        font-size: 14px;
        font-family: inherit;
        transition: border-color 0.2s;
      }

      .form-input:focus,
      .form-select:focus,
      .form-textarea:focus {
        outline: none;
        border-color: #007aff;
      }

      .form-textarea {
        resize: vertical;
        min-height: 100px;
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }

      .answer-options {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .answer-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px;
        background: #f8f9fa;
        border-radius: 8px;
      }

      .answer-label {
        width: 40px;
        font-weight: bold;
        color: #007aff;
        flex-shrink: 0;
      }

      .answer-input {
        flex: 1;
        padding: 10px;
        border: 1px solid #e5e5ea;
        border-radius: 6px;
        font-size: 14px;
      }

      .answer-correct {
        width: 24px;
        height: 24px;
        cursor: pointer;
      }

      .file-upload {
        border: 2px dashed #e5e5ea;
        border-radius: 8px;
        padding: 24px;
        text-align: center;
        cursor: pointer;
        transition: all 0.2s;
      }

      .file-upload:hover {
        border-color: #007aff;
        background: #f0f8ff;
      }

      .file-upload input[type="file"] {
        display: none;
      }

      .file-upload-label {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        cursor: pointer;
      }

      .file-upload-icon {
        font-size: 48px;
        color: #007aff;
      }

      .file-upload-text {
        font-size: 14px;
        color: #666;
      }

      .file-preview {
        margin-top: 12px;
        padding: 12px;
        background: #f8f9fa;
        border-radius: 8px;
        display: none;
      }

      .file-preview.show {
        display: block;
      }

      .file-preview img,
      .file-preview video,
      .file-preview audio {
        max-width: 100%;
        border-radius: 8px;
      }

      .media-type-info {
        font-size: 12px;
        color: #666;
        margin-top: 4px;
      }

      .modal-footer {
        padding: 20px 24px;
        border-top: 1px solid #e5e5ea;
        display: flex;
        justify-content: flex-end;
        gap: 12px;
        position: sticky;
        bottom: 0;
        background: white;
      }

      .btn-cancel {
        background: #f5f5f5;
        color: #666;
      }

      .btn-cancel:hover {
        background: #e5e5ea;
      }

      .btn-submit {
        background: linear-gradient(135deg, #007aff 0%, #34c759 100%);
        color: white;
      }

      .btn-submit:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
      }

      .prize-row {
        display: flex;
        align-items: flex-end;
        gap: 12px;
        padding: 16px;
        background: #f8f9fa;
        border-radius: 8px;
        border: 1px solid #e5e5ea;
      }

      .checkbox-list {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        padding: 12px;
        background: #f8f9fa;
        border-radius: 8px;
        border: 1px solid #e5e5ea;
      }

      .checkbox-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        background: white;
        border-radius: 6px;
        border: 1px solid #e5e5ea;
        font-size: 14px;
        color: #333;
      }

      /* User History Styles */
      .user-info-header {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 12px 12px 0 0;
      }

      .user-avatar-large {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        font-weight: bold;
        border: 3px solid white;
      }

      .user-info-details {
        flex: 1;
      }

      .user-info-name {
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 4px;
      }

      .user-info-email {
        font-size: 14px;
        opacity: 0.9;
        margin-bottom: 4px;
      }

      .user-info-school {
        font-size: 13px;
        opacity: 0.8;
      }

      .history-stats-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 12px;
        padding: 20px;
        background: #f8f9fa;
      }

      .history-stat-box {
        text-align: center;
        padding: 16px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .history-stat-value {
        font-size: 24px;
        font-weight: bold;
        color: #007aff;
        margin-bottom: 4px;
      }

      .history-stat-label {
        font-size: 12px;
        color: #666;
      }

      .history-list-container {
        padding: 20px;
        max-height: 400px;
        overflow-y: auto;
      }

      .history-item-card {
        background: white;
        border: 1px solid #e5e5ea;
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 12px;
        transition: transform 0.2s, box-shadow 0.2s;
      }

      .history-item-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .history-item-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 12px;
      }

      .history-contest-name {
        font-size: 16px;
        font-weight: bold;
        color: #333;
        margin-bottom: 4px;
      }

      .history-contest-date {
        font-size: 12px;
        color: #666;
      }

      .history-status-badge {
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: bold;
        background: #d4edda;
        color: #155724;
      }

      .history-item-stats {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 8px;
        padding-top: 12px;
        border-top: 1px solid #f5f5f5;
      }

      .history-item-stat {
        text-align: center;
      }

      .history-item-stat-label {
        font-size: 10px;
        color: #666;
        margin-bottom: 4px;
      }

      .history-item-stat-value {
        font-size: 14px;
        font-weight: bold;
        color: #007aff;
      }

      .history-item-stat-value.rank {
        color: #ff9500;
      }

      .history-item-stat-value.time {
        color: #34c759;
      }

      .empty-history {
        text-align: center;
        padding: 60px 20px;
        color: #999;
      }

      .empty-history-icon {
        font-size: 64px;
        margin-bottom: 16px;
        opacity: 0.5;
      }

      .empty-history-text {
        font-size: 16px;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .sidebar {
          width: 200px;
        }

        .main-content {
          margin-left: 200px;
          padding: 20px;
        }

        .stats-grid {
          grid-template-columns: 1fr;
        }

        .form-row {
          grid-template-columns: 1fr;
        }

        .modal {
          max-width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">üéÆ GameEDU</div>
        <div class="sidebar-subtitle">Admin Panel</div>
      </div>
      <ul class="nav-menu">
        <li class="nav-item">
          <a class="nav-link active" onclick="showSection('dashboard')">
            <span class="nav-icon">üìä</span>
            <span>Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" onclick="showSection('player')">
            <span class="nav-icon">üë•</span>
            <span>Player</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" onclick="showSection('contests')">
            <span class="nav-icon">üìã</span>
            <span>Contests</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" onclick="showSection('results')">
            <span class="nav-icon">üìà</span>
            <span>Results</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" onclick="showSection('prizes')">
            <span class="nav-icon">üèÜ</span>
            <span>Prizes</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" onclick="showSection('packages')">
            <span class="nav-icon">üõí</span>
            <span>Game Packages</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" onclick="showSection('about-game')">
            <span class="nav-icon">‚ÑπÔ∏è</span>
            <span>About Game</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" onclick="showSection('transactions')">
            <span class="nav-icon">üí≥</span>
            <span>Transaction History</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" onclick="showSection('winners')">
            <span class="nav-icon">üéÅ</span>
            <span>Th√¥ng tin tr√∫ng th∆∞·ªüng</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Dashboard Section -->
      <div id="dashboard" class="content-section active">
        <div class="page-header">
          <div class="page-title">üìä Dashboard</div>
          <div class="user-info">
            <div>
              <div style="font-size: 12px; color: #666">Admin</div>
              <div style="font-weight: 500">Admin User</div>
            </div>
            <div class="user-avatar">AD</div>
          </div>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-header">
              <div class="stat-title">Total Users</div>
              <div class="stat-icon">üë•</div>
            </div>
            <div class="stat-value">1,234</div>
              <div class="stat-change">+12% from last month</div>
          </div>

          <div class="stat-card">
            <div class="stat-header">
              <div class="stat-title">Active Contests</div>
              <div class="stat-icon">üìã</div>
            </div>
            <div class="stat-value">3</div>
              <div class="stat-change">2 starting soon</div>
          </div>

          <div class="stat-card">
            <div class="stat-header">
              <div class="stat-title">Total Plays</div>
              <div class="stat-icon">üéÆ</div>
            </div>
            <div class="stat-value">5,678</div>
            <div class="stat-change">+25% from last month</div>
          </div>

          <div class="stat-card">
            <div class="stat-header">
              <div class="stat-title">Monthly Revenue</div>
              <div class="stat-icon">üí∞</div>
            </div>
            <div class="stat-value">2,450,000</div>
            <div class="stat-change">MMK</div>
          </div>
        </div>

        <!-- Recent Activity -->
        <div class="content-card">
          <div class="card-header">
            <div class="card-title">Recent Activity</div>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Time</th>
                  <th>User</th>
                  <th>Action</th>
                  <th>Details</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>10:30 AM</td>
                  <td>John Doe</td>
                  <td>Completed exam</td>
                  <td>English Challenge 3 - 85 points</td>
                </tr>
                <tr>
                  <td>10:15 AM</td>
                  <td>Jane Smith</td>
                  <td>Purchased game package</td>
                  <td>5 Turns - 400 MMK</td>
                </tr>
                <tr>
                  <td>09:45 AM</td>
                  <td>Bob Johnson</td>
                  <td>Completed exam</td>
                  <td>English Challenge 3 - 92 points</td>
                </tr>
                <tr>
                  <td>09:20 AM</td>
                  <td>Alice Brown</td>
                  <td>Registered account</td>
                  <td>High School GHI</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Player Section -->
      <div id="player" class="content-section">
        <div class="page-header">
          <div class="page-title">üë• Player Management</div>
        </div>

        <div class="content-card">
          <div class="card-header">
            <div class="card-title">User List</div>
            <input
              type="text"
              id="searchUsers"
              placeholder="Search users..."
              onkeyup="searchUsers()"
              style="padding: 8px 12px; border: 1px solid #e5e5ea; border-radius: 8px; width: 300px"
            />
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Email</th>
                  <th>School</th>
                  <th>Plays</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>#001</td>
                  <td>John Doe</td>
                  <td>johndoe@example.com</td>
                  <td>High School ABC</td>
                  <td>3</td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewUserHistory('001', 'John Doe', 'johndoe@example.com', 'High School ABC')">View</button>
                      <button class="btn-sm btn-delete">Delete</button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>#002</td>
                  <td>Jane Smith</td>
                  <td>janesmith@example.com</td>
                  <td>High School XYZ</td>
                  <td>5</td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewUserHistory('002', 'Jane Smith', 'janesmith@example.com', 'High School XYZ')">View</button>
                      <button class="btn-sm btn-delete">Delete</button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>#003</td>
                  <td>Bob Johnson</td>
                  <td>bobjohnson@example.com</td>
                  <td>High School DEF</td>
                  <td>2</td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewUserHistory('003', 'Bob Johnson', 'bobjohnson@example.com', 'High School DEF')">View</button>
                      <button class="btn-sm btn-delete">Delete</button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Contests Section -->
      <div id="contests" class="content-section">
        <div class="page-header">
          <div class="page-title">üìã Contest Management</div>
          <button class="btn btn-primary" onclick="openAddContestModal()">+ Create New Contest</button>
        </div>

        <div class="content-card">
          <div class="card-header">
            <div class="card-title">Contest List</div>
            <input
              type="text"
              id="searchContests"
              placeholder="Search contests..."
              onkeyup="searchContests()"
              style="padding: 8px 12px; border: 1px solid #e5e5ea; border-radius: 8px; width: 300px"
            />
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Contest Name</th>
                  <th>Time</th>
                  <th>Status</th>
                  <th>Participants</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>#C001</td>
                  <td>English Challenge 4</td>
                  <td>Jan 22 - Jan 30, 2024</td>
                  <td>
                    <span class="status-badge status-upcoming">Upcoming</span>
                  </td>
                  <td>0</td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewContestDetail('C001', 'English Challenge 4', '2024-01-22T00:00', '2024-01-30T23:59', 'English contest January 2024', 0, 2, 60, ['High School ABC', 'High School XYZ'], 40, 'English', 'Vocabulary', 'upcoming')">View</button>
                      <button class="btn-sm btn-edit" onclick="openEditContestModal('C001', 'English Challenge 4', '2024-01-22T00:00', '2024-01-30T23:59', 'English contest January 2024', 2, 60, ['High School ABC', 'High School XYZ'], 40, 'English', 'Vocabulary')">Edit</button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>#C002</td>
                  <td>English Challenge 3</td>
                  <td>Jan 15 - Jan 21, 2024</td>
                  <td>
                    <span class="status-badge status-active">Active</span>
                  </td>
                  <td>156</td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewContestDetail('C002', 'English Challenge 3', '2024-01-15T00:00', '2024-01-21T23:59', 'English contest January 2024', 156, 3, 45, ['High School ABC', 'High School DEF'], 50, 'English', 'Reading Comprehension', 'active')">View</button>
                      <button class="btn-sm btn-edit" onclick="openEditContestModal('C002', 'English Challenge 3', '2024-01-15T00:00', '2024-01-21T23:59', 'English contest January 2024', 3, 45, ['High School ABC', 'High School DEF'], 50, 'English', 'Reading Comprehension')">Edit</button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>#C003</td>
                  <td>English Challenge 2</td>
                  <td>Jan 8 - Jan 14, 2024</td>
                  <td>
                    <span class="status-badge status-ended">Ended</span>
                  </td>
                  <td>234</td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewContestDetail('C003', 'English Challenge 2', '2024-01-08T00:00', '2024-01-14T23:59', 'English contest January 2024', 234, 1, 50, ['High School XYZ', 'High School DEF'], 45, 'English', 'Grammar', 'ended')">View</button>
                      <button class="btn-sm btn-edit" onclick="openEditContestModal('C003', 'English Challenge 2', '2024-01-08T00:00', '2024-01-14T23:59', 'English contest January 2024', 1, 50, ['High School XYZ', 'High School DEF'], 45, 'English', 'Grammar')">Edit</button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>#C004</td>
                  <td>English Challenge 1</td>
                  <td>Jan 1 - Jan 7, 2024</td>
                  <td>
                    <span class="status-badge status-ended">Ended</span>
                  </td>
                  <td>189</td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewContestDetail('C004', 'English Challenge 1', '2024-01-01T00:00', '2024-01-07T23:59', 'English contest January 2024', 189, 0, 55, ['High School ABC', 'High School GHI', 'High School JKL'], 40, 'English', 'Listening', 'ended')">View</button>
                      <button class="btn-sm btn-edit" onclick="openEditContestModal('C004', 'English Challenge 1', '2024-01-01T00:00', '2024-01-07T23:59', 'English contest January 2024', 0, 55, ['High School ABC', 'High School GHI', 'High School JKL'], 40, 'English', 'Listening')">Edit</button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Results Section -->
      <div id="results" class="content-section">
        <div class="page-header">
          <div class="page-title">üìà Results Management</div>
          <button class="btn btn-primary">Export Report</button>
        </div>

        <div class="content-card">
          <div class="card-header">
            <div class="card-title">Exam Results</div>
            <div style="display: flex; gap: 12px; align-items: center;">
              <input
                type="text"
                id="searchResults"
                placeholder="Search results..."
                onkeyup="searchResults()"
                style="padding: 8px 12px; border: 1px solid #e5e5ea; border-radius: 8px; width: 250px"
              />
              <select
                id="filterContest"
                onchange="searchResults()"
                style="padding: 8px 12px; border: 1px solid #e5e5ea; border-radius: 8px"
              >
                <option value="">All Contests</option>
                <option value="Challenge 3">English Challenge 3</option>
                <option value="Challenge 2">English Challenge 2</option>
              </select>
            </div>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>User</th>
                  <th>Score</th>
                  <th>Time</th>
                  <th>Correct/Wrong</th>
                  <th>Contest</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>#1</td>
                  <td>John Doe</td>
                  <td>98</td>
                  <td>35 minutes</td>
                  <td>49/50</td>
                  <td>Challenge 3</td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewResultDetail(1, 'John Doe', 98, '35 minutes', '49/50', 'Challenge 3')">View</button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>#2</td>
                  <td>Jane Smith</td>
                  <td>97</td>
                  <td>32 minutes</td>
                  <td>48/50</td>
                  <td>Challenge 3</td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewResultDetail(2, 'Jane Smith', 97, '32 minutes', '48/50', 'Challenge 3')">View</button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>#3</td>
                  <td>Bob Johnson</td>
                  <td>96</td>
                  <td>40 minutes</td>
                  <td>48/50</td>
                  <td>Challenge 3</td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewResultDetail(3, 'Bob Johnson', 96, '40 minutes', '48/50', 'Challenge 3')">View</button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Prizes Section -->
      <div id="prizes" class="content-section">
        <div class="page-header">
          <div class="page-title">üèÜ Prize Management</div>
        </div>

        <div class="content-card">
          <div class="card-header">
            <div class="card-title">Prizes by Contest</div>
            <div style="display: flex; gap: 12px; align-items: center;">
              <input
                type="text"
                id="searchPrizes"
                placeholder="Search prizes..."
                onkeyup="searchPrizes()"
                style="padding: 8px 12px; border: 1px solid #e5e5ea; border-radius: 8px; width: 220px"
              />
              <select
                id="filterPrizeContest"
                onchange="searchPrizes()"
                style="padding: 8px 12px; border: 1px solid #e5e5ea; border-radius: 8px; min-width: 180px"
              >
                <option value="">All contests</option>
                <option value="Challenge 3">Challenge 3</option>
                <option value="Challenge 2">Challenge 2</option>
              </select>
            </div>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Contest</th>
                  <th>Rank</th>
                  <th>Prize</th>
                  <th>Recipient</th>
                  <th>School</th>
                  <th>Note</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr data-prize-id="C002-1" data-contest="challenge 3" data-decision="pending">
                  <td>Challenge 3</td>
                  <td>1</td>
                  <td>50,000 MMK</td>
                  <td>John Doe</td>
                  <td>High School ABC</td>
                  <td style="max-width: 200px; font-size: 13px; color: #666;">Awarded on 20/01/2024</td>
                  <td>
                    <span class="status-badge status-pending">Pending Review</span>
                  </td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewPrizeDetail('C002-1')">View Play</button>
                      <button class="btn-sm btn-accept" onclick="handlePrizeAction('C002-1', 'accept')">Accept</button>
                      <button class="btn-sm btn-reject" onclick="handlePrizeAction('C002-1', 'reject')">Reject</button>
                    </div>
                  </td>
                </tr>
                <tr data-prize-id="C002-2" data-contest="challenge 3" data-decision="pending">
                  <td>Challenge 3</td>
                  <td>2</td>
                  <td>30,000 MMK</td>
                  <td>Jane Smith</td>
                  <td>High School XYZ</td>
                  <td style="max-width: 200px; font-size: 13px; color: #666;">Awarded on 20/01/2024</td>
                  <td>
                    <span class="status-badge status-pending">Pending Review</span>
                  </td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewPrizeDetail('C002-2')">View Play</button>
                      <button class="btn-sm btn-accept" onclick="handlePrizeAction('C002-2', 'accept')">Accept</button>
                      <button class="btn-sm btn-reject" onclick="handlePrizeAction('C002-2', 'reject')">Reject</button>
                    </div>
                  </td>
                </tr>
                <tr data-prize-id="C002-3" data-contest="challenge 3" data-decision="pending">
                  <td>Challenge 3</td>
                  <td>3</td>
                  <td>20,000 MMK</td>
                  <td>Bob Johnson</td>
                  <td>High School DEF</td>
                  <td style="max-width: 200px; font-size: 13px; color: #666;">Awarded on 20/01/2024</td>
                  <td>
                    <span class="status-badge status-pending">Pending Review</span>
                  </td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewPrizeDetail('C002-3')">View Play</button>
                      <button class="btn-sm btn-accept" onclick="handlePrizeAction('C002-3', 'accept')">Accept</button>
                      <button class="btn-sm btn-reject" onclick="handlePrizeAction('C002-3', 'reject')">Reject</button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td colspan="7"></td>
                  <td>
                    <button class="btn btn-primary" style="width: 100%;" onclick="handleAcceptAllPrizes()">‚úÖ Accept All Approved</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Packages Section -->
      <div id="packages" class="content-section">
        <div class="page-header">
          <div class="page-title">üõí Game Package Management</div>
          <button class="btn btn-primary" onclick="openAddPackageModal()">+ Add New Package</button>
        </div>

        <div class="content-card">
          <div class="card-header">
            <div class="card-title">Game Package List</div>
            <input
              type="text"
              id="searchPackages"
              placeholder="Search packages..."
              onkeyup="searchPackages()"
              style="padding: 8px 12px; border: 1px solid #e5e5ea; border-radius: 8px; width: 300px"
            />
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Package Name</th>
                  <th>Turns</th>
                  <th>Price</th>
                  <th>Discount</th>
                  <th>Sold</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>#P001</td>
                  <td>1 Turn</td>
                  <td>1</td>
                  <td>100 MMK</td>
                  <td>0%</td>
                  <td>234</td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewPackageDetail('P001', '1 Turn', 1, 100, 0, false, 234)">View</button>
                      <button class="btn-sm btn-edit" onclick="openEditPackageModal('P001', '1 Turn', 1, 100, 0, false)">Edit</button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>#P002</td>
                  <td>3 Turns</td>
                  <td>3</td>
                  <td>270 MMK</td>
                  <td>10%</td>
                  <td>189</td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewPackageDetail('P002', '3 Turns', 3, 270, 10, false, 189)">View</button>
                      <button class="btn-sm btn-edit" onclick="openEditPackageModal('P002', '3 Turns', 3, 270, 10, false)">Edit</button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>#P003</td>
                  <td>5 Turns (Recommended)</td>
                  <td>5</td>
                  <td>400 MMK</td>
                  <td>20%</td>
                  <td>456</td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewPackageDetail('P003', '5 Turns (Recommended)', 5, 400, 20, true, 456)">View</button>
                      <button class="btn-sm btn-edit" onclick="openEditPackageModal('P003', '5 Turns (Recommended)', 5, 400, 20, true)">Edit</button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>#P004</td>
                  <td>10 Turns</td>
                  <td>10</td>
                  <td>700 MMK</td>
                  <td>30%</td>
                  <td>123</td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn-sm btn-view" onclick="viewPackageDetail('P004', '10 Turns', 10, 700, 30, false, 123)">View</button>
                      <button class="btn-sm btn-edit" onclick="openEditPackageModal('P004', '10 Turns', 10, 700, 30, false)">Edit</button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Transaction History Section -->
      <div id="transactions" class="content-section">
        <div class="page-header">
          <div class="page-title">üí≥ Transaction History</div>
          <button class="btn btn-primary" onclick="exportTransactions()">üì• Export Report</button>
        </div>

        <div class="content-card">
          <div class="card-header">
            <div class="card-title">Transaction List</div>
            <div style="display: flex; gap: 12px; align-items: center;">
              <input
                type="text"
                id="searchTransactions"
                placeholder="Search transactions..."
                onkeyup="searchTransactions()"
                style="padding: 8px 12px; border: 1px solid #e5e5ea; border-radius: 8px; width: 250px"
              />
              <select
                id="filterTransactionStatus"
                onchange="searchTransactions()"
                style="padding: 8px 12px; border: 1px solid #e5e5ea; border-radius: 8px"
              >
                <option value="">All Status</option>
                <option value="completed">Completed</option>
                <option value="pending">Pending</option>
                <option value="failed">Failed</option>
                <option value="cancelled">Cancelled</option>
              </select>
              <select
                id="filterTransactionContest"
                onchange="searchTransactions()"
                style="padding: 8px 12px; border: 1px solid #e5e5ea; border-radius: 8px; min-width: 180px"
              >
                <option value="">All Contests</option>
                <option value="English Challenge 3">English Challenge 3</option>
                <option value="English Challenge 2">English Challenge 2</option>
                <option value="English Challenge 1">English Challenge 1</option>
              </select>
            </div>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>STT</th>
                  <th>Transaction ID</th>
                  <th>Time</th>
                  <th>Player Name</th>
                  <th>Package</th>
                  <th>Contest</th>
                  <th>Amount</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="transactionTableBody">
                <!-- Transaction data will be loaded here -->
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- About Game Section -->
      <div id="about-game" class="content-section">
        <div class="page-header">
          <div class="page-title">‚ÑπÔ∏è About Game CMS</div>
          <button class="btn btn-primary" onclick="openEditAboutGameModal()">‚úèÔ∏è Edit About Game</button>
        </div>

        <div class="content-card">
          <div class="card-header">
            <div class="card-title">Current About Game Content</div>
          </div>
          <div style="padding: 20px;">
            <div id="aboutGamePreview" style="line-height: 1.8;">
              <div style="margin-bottom: 20px;">
                <h3 style="color: #333; margin-bottom: 12px;" id="previewTitle">GameEDU - Educational Gaming Platform</h3>
                <p style="color: #666; font-size: 15px; margin-bottom: 16px;" id="previewDescription">
                  GameEDU is an innovative educational gaming platform designed to make learning fun and engaging. 
                  Students can participate in exciting contests, test their knowledge, and compete for prizes while improving their skills.
                </p>
              </div>
              
              <div style="margin-bottom: 20px;">
                <h4 style="color: #333; margin-bottom: 12px;">A. M·ª•c ti√™u c·ªßa Game</h4>
                <div style="color: #666; white-space: pre-line;" id="previewGameGoal">Ch∆°i ‚Äì T√≠nh ƒëi·ªÉm ‚Äì X·∫øp h·∫°ng ‚Äì Nh·∫≠n th∆∞·ªüng.</div>
              </div>

              <div style="margin-bottom: 20px;">
                <h4 style="color: #333; margin-bottom: 12px;">B. C√°ch ch∆°i (How to Play)</h4>
                <div style="color: #666; white-space: pre-line;" id="previewHowToPlay">Ch·ªçn S·ª± ki·ªán: Ch·ªçn m·ªôt s·ª± ki·ªán (Event) ƒëang di·ªÖn ra 

B·∫Øt ƒë·∫ßu ch∆°i: Nh·∫•n v√†o Ng√†y hi·ªán t·∫°i ƒë·ªÉ b·∫Øt ƒë·∫ßu phi√™n ch∆°i.

Tr·∫£ l·ªùi C√¢u h·ªèi: Tr·∫£ l·ªùi t·ª´ng c√¢u h·ªèi theo th·ª© t·ª± trong th·ªùi gian quy ƒë·ªãnh cho m·ªói c√¢u.

K·∫øt th√∫c Phi√™n ch∆°i: Phi√™n ch∆°i k·∫øt th√∫c ngay l·∫≠p t·ª©c n·∫øu ng∆∞·ªùi ch∆°i tr·∫£ l·ªùi sai ho·∫∑c h·∫øt th·ªùi gian cho c√¢u h·ªèi hi·ªán t·∫°i.

T√≠nh to√°n & X·∫øp h·∫°ng: H·ªá th·ªëng t√≠nh to√°n t·ªïng ƒëi·ªÉm v√† th·ªùi gian ƒë·∫°t ƒë∆∞·ª£c, sau ƒë√≥ so s√°nh k·∫øt qu·∫£ ƒë·ªÉ x·∫øp h·∫°ng.</div>
              </div>

              <div style="margin-bottom: 20px;">
                <h4 style="color: #333; margin-bottom: 12px;">C. Lu·∫≠t ch∆°i Game & T√≠nh ƒëi·ªÉm (Game Rules & Scoring)</h4>
                <div style="color: #666; white-space: pre-line;" id="previewGameRules">T√≠nh ƒëi·ªÉm: M·ªói c√¢u h·ªèi tr·∫£ l·ªùi ƒë√∫ng s·∫Ω ƒë∆∞·ª£c c·ªông m·ªôt s·ªë ƒëi·ªÉm nh·∫•t ƒë·ªãnh (+X ƒëi·ªÉm), ph·ª• thu·ªôc v√†o ƒë·ªô kh√≥ c·ªßa c√¢u h·ªèi.

Tr·∫£ l·ªùi c√†ng nhanh th√¨ th·ªùi gian ho√†n th√†nh c√†ng √≠t.

Kh√¥ng gi·ªõi h·∫°n s·ªë l∆∞·ª£ng c√¢u h·ªèi. Ng∆∞·ªùi ch∆°i s·∫Ω ch∆°i li√™n t·ª•c cho ƒë·∫øn khi phi√™n ch∆°i k·∫øt th√∫c.

Phi√™n ch∆°i s·∫Ω k·∫øt th√∫c khi:
+ Ng∆∞·ªùi ch∆°i tr·∫£ l·ªùi sai c√¢u h·ªèi.
+ Ng∆∞·ªùi ch∆°i h·∫øt th·ªùi gian quy ƒë·ªãnh ƒë·ªÉ tr·∫£ l·ªùi c√¢u h·ªèi hi·ªán t·∫°i.</div>
              </div>

              <div style="margin-bottom: 20px;">
                <h4 style="color: #333; margin-bottom: 12px;">D. Lu·∫≠t X·∫øp h·∫°ng (Ranking Rules)</h4>
                <div style="color: #666; white-space: pre-line;" id="previewRankingRules">∆Øu ti√™n 1 (ƒêi·ªÉm): ƒêi·ªÉm s·ªë cao nh·∫•t.

∆Øu ti√™n 2 (Th·ªùi gian): N·∫øu b·∫±ng ƒëi·ªÉm, ng∆∞·ªùi c√≥ th·ªùi gian ho√†n th√†nh th·∫•p h∆°n s·∫Ω x·∫øp tr√™n.

∆Øu ti√™n 3 (Th·ªùi ƒëi·ªÉm): N·∫øu b·∫±ng ƒëi·ªÉm v√† b·∫±ng th·ªùi gian, ng∆∞·ªùi ƒë·∫°t k·∫øt qu·∫£ s·ªõm h∆°n s·∫Ω x·∫øp tr√™n.</div>
              </div>

              <div style="margin-bottom: 20px;">
                <h4 style="color: #333; margin-bottom: 12px;">E. Th·ªÉ l·ªá Gi·∫£i th∆∞·ªüng (Reward Rules)</h4>
                <div style="color: #666; white-space: pre-line;" id="previewRewardRules">M·ªói s·ª± ki·ªán (Event) s·∫Ω c√≥ c∆° c·∫•u gi·∫£i th∆∞·ªüng ri√™ng (v√≠ d·ª•: h·ªçc b·ªïng MytelPay).

Ph√¢n b·ªï theo Rank:
Rank #1: Gi·∫£i V√†ng
Rank #2‚Äì3: Gi·∫£i B·∫°c
Rank #4‚Äì10: Gi·∫£i ƒê·ªìng

Gi·∫£i th∆∞·ªüng ch·ªâ ƒë∆∞·ª£c trao sau khi s·ª± ki·ªán k·∫øt th√∫c v√† k·∫øt qu·∫£ ƒë∆∞·ª£c x√°c nh·∫≠n.

Ng∆∞·ªùi ch∆°i c√≥ th·ªÉ ki·ªÉm tra c√°c ph·∫ßn th∆∞·ªüng c·ªßa m√¨nh trong m·ª•c Rewards ho·∫∑c Notification c·ªßa h·ªá th·ªëng.</div>
              </div>

              <div style="margin-bottom: 20px;">
                <h4 style="color: #333; margin-bottom: 12px;">Key Features</h4>
                <ul id="previewFeatures" style="list-style: none; padding: 0;">
                  <li style="padding: 8px 0; color: #666;">‚úì Interactive quizzes and challenges</li>
                  <li style="padding: 8px 0; color: #666;">‚úì Real-time leaderboards</li>
                  <li style="padding: 8px 0; color: #666;">‚úì Prize competitions</li>
                  <li style="padding: 8px 0; color: #666;">‚úì Multiple subjects and topics</li>
                </ul>
              </div>

              <div style="margin-bottom: 20px;">
                <h4 style="color: #333; margin-bottom: 12px;">Contact Information</h4>
                <div style="color: #666;" id="previewContact">
                  <p style="margin: 4px 0;">Email: support@gameedu.com</p>
                  <p style="margin: 4px 0;">Phone: +95 9 123 456 789</p>
                  <p style="margin: 4px 0;">Address: Yangon, Myanmar</p>
                </div>
              </div>

              <div style="margin-bottom: 20px;">
                <h4 style="color: #333; margin-bottom: 12px;">Social Media</h4>
                <div style="color: #666;" id="previewSocial">
                  <p style="margin: 4px 0;">Facebook: facebook.com/gameedu</p>
                  <p style="margin: 4px 0;">Twitter: @gameedu</p>
                  <p style="margin: 4px 0;">Instagram: @gameedu</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Winners Information Section -->
      <div id="winners" class="content-section">
        <div class="page-header">
          <div class="page-title">üéÅ Th√¥ng tin tr√∫ng th∆∞·ªüng</div>
          <button class="btn btn-primary" onclick="exportWinners()">üì• Export Report</button>
        </div>

        <div class="content-card">
          <div class="card-header">
            <div class="card-title">Danh s√°ch sinh vi√™n tr√∫ng th∆∞·ªüng</div>
            <div style="display: flex; gap: 12px; align-items: center;">
              <input
                type="text"
                id="searchWinners"
                placeholder="T√¨m ki·∫øm theo t√™n, m√£ sinh vi√™n, tr∆∞·ªùng..."
                onkeyup="searchWinners()"
                style="padding: 8px 12px; border: 1px solid #e5e5ea; border-radius: 8px; width: 300px"
              />
              <select
                id="filterWinnerStatus"
                onchange="searchWinners()"
                style="padding: 8px 12px; border: 1px solid #e5e5ea; border-radius: 8px"
              >
                <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                <option value="pending">Ch·ªù x·ª≠ l√Ω</option>
                <option value="processing">ƒêang x·ª≠ l√Ω</option>
                <option value="completed">ƒê√£ thanh to√°n</option>
                <option value="cancelled">ƒê√£ h·ªßy</option>
              </select>
              <select
                id="filterWinnerContest"
                onchange="searchWinners()"
                style="padding: 8px 12px; border: 1px solid #e5e5ea; border-radius: 8px; min-width: 180px"
              >
                <option value="">T·∫•t c·∫£ Contest</option>
                <option value="English Challenge 3">English Challenge 3</option>
                <option value="English Challenge 2">English Challenge 2</option>
                <option value="English Challenge 1">English Challenge 1</option>
              </select>
            </div>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>STT</th>
                  <th>M√£ sinh vi√™n</th>
                  <th>H·ªç v√† t√™n</th>
                  <th>Tr∆∞·ªùng</th>
                  <th>Contest</th>
                  <th>H·∫°ng</th>
                  <th>S·ªë ti·ªÅn th∆∞·ªüng</th>
                  <th>S·ªë t√†i kho·∫£n</th>
                  <th>Ng√¢n h√†ng</th>
                  <th>Tr·∫°ng th√°i</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="winnersTableBody">
                <!-- Winners data will be loaded here -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Add Contest Modal -->
    <div class="modal-overlay" id="addContestModal">
      <div class="modal">
        <div class="modal-header">
          <div class="modal-title">üìã Create New Contest</div>
          <button class="modal-close" onclick="closeAddContestModal()">√ó</button>
        </div>
        <div class="modal-body">
          <form id="addContestForm" onsubmit="handleSubmitContest(event)">
            <div class="form-group">
              <label class="form-label required">Contest Name</label>
              <input type="text" class="form-input" id="contestName" placeholder="E.g: English Challenge 5" required>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label required">Start Date</label>
                <input type="datetime-local" class="form-input" id="contestStartDate" required>
              </div>
              <div class="form-group">
                <label class="form-label required">End Date</label>
                <input type="datetime-local" class="form-input" id="contestEndDate" required>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Description</label>
              <textarea class="form-textarea" id="contestDescription" placeholder="Contest description..." rows="3"></textarea>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Free Play Limit</label>
                <input type="number" class="form-input" id="contestFreePlayLimit" placeholder="E.g: 3 free turns" min="0">
              </div>
              <div class="form-group">
                <label class="form-label required">Number of Questions</label>
                <input type="number" class="form-input" id="contestQuestionCount" placeholder="E.g: 50" min="1" required>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label required">Subject</label>
                <select class="form-select" id="contestSubject" required>
                  <option value="">Select subject...</option>
                  <option value="English">English</option>
                  <option value="Mathematics">Mathematics</option>
                  <option value="Science">Science</option>
                  <option value="History">History</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label required">Topic</label>
                <select class="form-select" id="contestTopic" required>
                  <option value="">Select topic...</option>
                  <option value="Vocabulary">Vocabulary</option>
                  <option value="Grammar">Grammar</option>
                  <option value="Reading Comprehension">Reading Comprehension</option>
                  <option value="Listening">Listening</option>
                  <option value="Algebra">Algebra</option>
                  <option value="Geometry">Geometry</option>
                  <option value="Physics">Physics</option>
                  <option value="World History">World History</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label required">Time per Question (seconds)</label>
                <input type="number" class="form-input" id="contestTimePerQuestion" placeholder="E.g: 60" min="1" required>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Allowed Schools</label>
              <div class="checkbox-list" id="contestSchools">
                <label class="checkbox-item">
                  <input type="checkbox" value="High School ABC"> High School ABC
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" value="High School XYZ"> High School XYZ
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" value="High School DEF"> High School DEF
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" value="High School GHI"> High School GHI
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" value="High School JKL"> High School JKL
                </label>
              </div>
              <div class="media-type-info">Tick multiple schools to allow participation from those institutions. Leave all unchecked for no restriction.</div>
            </div>
            <div class="form-group">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <label class="form-label required">Prizes</label>
                <button type="button" class="btn-sm btn-primary" onclick="addPrizeRow()">+ Add Prize</button>
              </div>
              <div id="prizeList" style="display: flex; flex-direction: column; gap: 12px;"></div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-cancel" onclick="closeAddContestModal()">Cancel</button>
          <button class="btn btn-submit" onclick="document.getElementById('addContestForm').requestSubmit()">
            Create Contest
          </button>
        </div>
      </div>
    </div>

    <!-- Edit Prize Modal -->
    <!-- View Prize Detail Modal -->
    <div class="modal-overlay" id="viewPrizeModal">
      <div class="modal" style="max-width: 800px;">
        <div class="modal-header">
          <div class="modal-title">üëÅÔ∏è Prize Details</div>
          <button class="modal-close" onclick="closeViewPrizeModal()">√ó</button>
        </div>
        <div class="modal-body">
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Contest</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewPrizeContest">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">Rank</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewPrizeRank">-</div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Prize Value</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; font-weight: 600; color: #007aff;" id="viewPrizeAmount">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">Description</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewPrizeDescription">-</div>
            </div>
          </div>

          <div class="form-group" style="margin-top: 20px; padding: 16px; background: #e3f2fd; border-radius: 8px; border: 2px solid #007aff;">
            <div style="font-weight: 600; color: #333; font-size: 16px; margin-bottom: 12px;">üèÜ Winner Information</div>
            <div id="viewWinnerInfoDisplay" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px;">
              <div>
                <div style="font-size: 12px; color: #666; margin-bottom: 4px;">Recipient Name</div>
                <div style="font-weight: 600; color: #333; font-size: 15px;" id="viewWinnerNameDisplay">-</div>
              </div>
              <div>
                <div style="font-size: 12px; color: #666; margin-bottom: 4px;">School</div>
                <div style="font-weight: 600; color: #007aff; font-size: 15px;" id="viewWinnerSchoolDisplay">-</div>
              </div>
              <div>
                <div style="font-size: 12px; color: #666; margin-bottom: 4px;">Player ID</div>
                <div style="font-weight: 600; color: #333; font-size: 15px;" id="viewWinnerIdDisplay">-</div>
              </div>
            </div>
          </div>

          <div class="history-stats-grid" style="margin: 20px 0; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));">
            <div class="history-stat-box">
              <div class="history-stat-value" id="viewPrizeScore">-</div>
              <div class="history-stat-label">Score</div>
            </div>
            <div class="history-stat-box">
              <div class="history-stat-value" id="viewPrizeCorrect">-</div>
              <div class="history-stat-label">Correct Answers</div>
            </div>
            <div class="history-stat-box">
              <div class="history-stat-value" id="viewPrizeTotalTime">-</div>
              <div class="history-stat-label">Total Time</div>
            </div>
            <div class="history-stat-box">
              <div class="history-stat-value" id="viewPrizeAvgTime">-</div>
              <div class="history-stat-label">Avg Time/Question</div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Note</label>
            <div class="form-textarea" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; min-height: 80px; white-space: pre-wrap;" id="viewPrizeNote">-</div>
          </div>

          <div class="form-group">
            <label class="form-label">Question Timeline</label>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Question</th>
                    <th>Your Answer</th>
                    <th>Result</th>
                    <th>Time Used</th>
                  </tr>
                </thead>
                <tbody id="viewPrizeQuestionBody">
                  <tr>
                    <td colspan="5" style="text-align: center; color: #999;">No data</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Status</label>
            <div id="viewPrizeStatusDisplay" style="display: inline-block; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 500;">-</div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-cancel" onclick="closeViewPrizeModal()">Close</button>
        </div>
      </div>
    </div>

    <div class="modal-overlay" id="editPrizeModal">
      <div class="modal" style="max-width: 900px;">
        <div class="modal-header">
          <div class="modal-title">‚úèÔ∏è Edit Prize</div>
          <button class="modal-close" onclick="closeEditPrizeModal()">√ó</button>
        </div>
        <div class="modal-body">
          <form id="editPrizeForm" onsubmit="handleSubmitEditPrize(event)">
            <div class="form-group">
              <label class="form-label required">Contest</label>
              <input type="text" class="form-input" id="editPrizeContest" readonly style="background: #f5f5f5;">
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label required">Rank</label>
                <input type="text" class="form-input" id="editPrizeRank" placeholder="E.g: 1, 2, 3, 4-10" required>
              </div>
              <div class="form-group">
                <label class="form-label required">Prize Value (MMK)</label>
                <input type="number" class="form-input" id="editPrizeAmount" placeholder="50000" min="0" required>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Description</label>
              <input type="text" class="form-input" id="editPrizeDescription" placeholder="E.g: Top 1 - Highest score + fastest time">
            </div>
            
            <!-- Winner Info Section -->
            <div class="form-group" style="margin-top: 20px; padding: 16px; background: #e3f2fd; border-radius: 8px; border: 2px solid #007aff;">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <div style="font-weight: 600; color: #333; font-size: 16px;">üèÜ Winner Information</div>
              </div>
              <div id="winnerInfoDisplay" style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                <div>
                  <div style="font-size: 12px; color: #666; margin-bottom: 4px;">Recipient Name</div>
                  <div style="font-weight: 600; color: #333; font-size: 15px;" id="winnerNameDisplay">-</div>
                </div>
                <div>
                  <div style="font-size: 12px; color: #666; margin-bottom: 4px;">School</div>
                  <div style="font-weight: 600; color: #007aff; font-size: 15px;" id="winnerSchoolDisplay">-</div>
                </div>
              </div>
            </div>
            
            <div class="form-group">
              <label class="form-label">Note</label>
              <textarea class="form-textarea" id="editPrizeNote" placeholder="Enter prize note..." rows="4"></textarea>
            </div>
            
            <div class="form-group">
              <label class="form-label required">Status</label>
              <select class="form-select" id="editPrizeStatus" required>
                <option value="pending">Pending</option>
                <option value="awarded">Awarded</option>
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-cancel" onclick="closeEditPrizeModal()">Cancel</button>
          <button class="btn btn-submit" onclick="document.getElementById('editPrizeForm').requestSubmit()">
            Save Changes
          </button>
        </div>
      </div>
    </div>

    <!-- View Contest Modal -->
    <div class="modal-overlay" id="viewContestModal">
      <div class="modal" style="max-width: 800px;">
        <div class="modal-header">
          <div class="modal-title">üëÅÔ∏è Contest Details</div>
          <button class="modal-close" onclick="closeViewContestModal()">√ó</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label class="form-label">ID</label>
            <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewContestId">-</div>
          </div>
          <div class="form-group">
            <label class="form-label">Contest Name</label>
            <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewContestName">-</div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Start Date</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewContestStartDate">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">End Date</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewContestEndDate">-</div>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Description</label>
            <div class="form-textarea" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; min-height: 80px; white-space: pre-wrap;" id="viewContestDescription">-</div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Participants</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewContestParticipants">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">Free Play Limit</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewContestFreePlayLimit">-</div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Number of Questions</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewContestQuestionCount">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">Subject</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewContestSubject">-</div>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Time per Question</label>
            <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewContestTimePerQuestion">-</div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Topic</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewContestTopic">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">Allowed Schools</label>
              <div class="form-textarea" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; min-height: 80px; white-space: pre-wrap;" id="viewContestSchools">-</div>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Status</label>
            <div id="viewContestStatusDisplay" style="display: inline-block; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 500;">-</div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-cancel" onclick="closeViewContestModal()">Close</button>
        </div>
      </div>
    </div>

    <!-- Edit Contest Modal -->
    <div class="modal-overlay" id="editContestModal">
      <div class="modal" style="max-width: 900px;">
        <div class="modal-header">
          <div class="modal-title">‚úèÔ∏è Edit Contest</div>
          <button class="modal-close" onclick="closeEditContestModal()">√ó</button>
        </div>
        <div class="modal-body">
          <form id="editContestForm" onsubmit="handleSubmitEditContest(event)">
            <div class="form-group">
              <label class="form-label">ID</label>
              <input type="text" class="form-input" id="editContestId" readonly style="background: #f5f5f5;">
            </div>
            <div class="form-group">
              <label class="form-label required">Contest Name</label>
              <input type="text" class="form-input" id="editContestName" placeholder="E.g: English Challenge 5" required>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label required">Start Date</label>
                <input type="datetime-local" class="form-input" id="editContestStartDate" required>
              </div>
              <div class="form-group">
                <label class="form-label required">End Date</label>
                <input type="datetime-local" class="form-input" id="editContestEndDate" required>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Description</label>
              <textarea class="form-textarea" id="editContestDescription" placeholder="Contest description..." rows="3"></textarea>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Free Play Limit</label>
                <input type="number" class="form-input" id="editContestFreePlayLimit" placeholder="E.g: 3" min="0">
              </div>
              <div class="form-group">
                <label class="form-label required">Number of Questions</label>
                <input type="number" class="form-input" id="editContestQuestionCount" placeholder="E.g: 50" min="1" required>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label required">Subject</label>
                <select class="form-select" id="editContestSubject" required>
                  <option value="">Select subject...</option>
                  <option value="English">English</option>
                  <option value="Mathematics">Mathematics</option>
                  <option value="Science">Science</option>
                  <option value="History">History</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label required">Topic</label>
                <select class="form-select" id="editContestTopic" required>
                  <option value="">Select topic...</option>
                  <option value="Vocabulary">Vocabulary</option>
                  <option value="Grammar">Grammar</option>
                  <option value="Reading Comprehension">Reading Comprehension</option>
                  <option value="Listening">Listening</option>
                  <option value="Algebra">Algebra</option>
                  <option value="Geometry">Geometry</option>
                  <option value="Physics">Physics</option>
                  <option value="World History">World History</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label required">Time per Question (seconds)</label>
                <input type="number" class="form-input" id="editContestTimePerQuestion" placeholder="E.g: 60" min="1" required>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Allowed Schools</label>
              <div class="checkbox-list" id="editContestSchools">
                <label class="checkbox-item">
                  <input type="checkbox" value="High School ABC"> High School ABC
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" value="High School XYZ"> High School XYZ
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" value="High School DEF"> High School DEF
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" value="High School GHI"> High School GHI
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" value="High School JKL"> High School JKL
                </label>
              </div>
              <div class="media-type-info">Tick multiple schools to allow participation from those institutions. Leave all unchecked for no restriction.</div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-cancel" onclick="closeEditContestModal()">Cancel</button>
          <button class="btn btn-submit" onclick="document.getElementById('editContestForm').requestSubmit()">
            Save Changes
          </button>
        </div>
      </div>
    </div>

    <!-- View Result Modal -->
    <div class="modal-overlay" id="viewResultModal">
      <div class="modal" style="max-width: 800px;">
        <div class="modal-header">
          <div class="modal-title">üëÅÔ∏è Result Details</div>
          <button class="modal-close" onclick="closeViewResultModal()">√ó</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label class="form-label">Rank</label>
            <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; font-weight: 600; font-size: 18px; color: #007aff;" id="viewResultRank">-</div>
          </div>
          <div class="form-group">
            <label class="form-label">User</label>
            <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewResultUser">-</div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Score</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; font-weight: 600; color: #007aff;" id="viewResultScore">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">Time</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewResultTime">-</div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Correct/Wrong</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewResultCorrect">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">Contest</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewResultContest">-</div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-cancel" onclick="closeViewResultModal()">Close</button>
        </div>
      </div>
    </div>

    <!-- View Package Modal -->
    <div class="modal-overlay" id="viewPackageModal">
      <div class="modal" style="max-width: 800px;">
        <div class="modal-header">
          <div class="modal-title">üëÅÔ∏è Package Details</div>
          <button class="modal-close" onclick="closeViewPackageModal()">√ó</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label class="form-label">ID</label>
            <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewPackageId">-</div>
          </div>
          <div class="form-group">
            <label class="form-label">Package Name</label>
            <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewPackageName">-</div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Turns</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewPackageTurns">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">Price (MMK)</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; font-weight: 600; color: #007aff;" id="viewPackagePrice">-</div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Discount (%)</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewPackageDiscount">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">Recommended Package</label>
              <div id="viewPackageRecommendedDisplay" style="display: inline-block; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 500;">-</div>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Sold</label>
            <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewPackageSold">-</div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-cancel" onclick="closeViewPackageModal()">Close</button>
        </div>
      </div>
    </div>

    <!-- Edit Package Modal -->
    <div class="modal-overlay" id="editPackageModal">
      <div class="modal">
        <div class="modal-header">
          <div class="modal-title">‚úèÔ∏è Edit Package</div>
          <button class="modal-close" onclick="closeEditPackageModal()">√ó</button>
        </div>
        <div class="modal-body">
          <form id="editPackageForm" onsubmit="handleSubmitEditPackage(event)">
            <div class="form-group">
              <label class="form-label">ID</label>
              <input type="text" class="form-input" id="editPackageId" readonly style="background: #f5f5f5;">
            </div>
            <div class="form-group">
              <label class="form-label required">Package Name</label>
              <input type="text" class="form-input" id="editPackageName" placeholder="E.g: 5 Turns" required>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label required">Turns</label>
                <input type="number" class="form-input" id="editPackageTurns" placeholder="5" min="1" required>
              </div>
              <div class="form-group">
                <label class="form-label required">Price (MMK)</label>
                <input type="number" class="form-input" id="editPackagePrice" placeholder="400" min="0" required>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Discount (%)</label>
                <input type="number" class="form-input" id="editPackageDiscount" placeholder="20" min="0" max="100" value="0">
              </div>
              <div class="form-group">
                <label class="form-label">Recommended Package</label>
                <select class="form-select" id="editPackageRecommended">
                  <option value="false">No</option>
                  <option value="true">Yes</option>
                </select>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-cancel" onclick="closeEditPackageModal()">Cancel</button>
          <button class="btn btn-submit" onclick="document.getElementById('editPackageForm').requestSubmit()">
            Save Changes
          </button>
        </div>
      </div>
    </div>

    <!-- Add Package Modal -->
    <div class="modal-overlay" id="addPackageModal">
      <div class="modal">
        <div class="modal-header">
          <div class="modal-title">üõí Add New Package</div>
          <button class="modal-close" onclick="closeAddPackageModal()">√ó</button>
        </div>
        <div class="modal-body">
          <form id="addPackageForm" onsubmit="handleSubmitPackage(event)">
            <div class="form-group">
              <label class="form-label required">Package Name</label>
              <input type="text" class="form-input" id="packageName" placeholder="E.g: 5 Turns" required>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label required">Turns</label>
                <input type="number" class="form-input" id="packageTurns" placeholder="5" min="1" required>
              </div>
              <div class="form-group">
                <label class="form-label required">Price (MMK)</label>
                <input type="number" class="form-input" id="packagePrice" placeholder="400" min="0" required>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Discount (%)</label>
                <input type="number" class="form-input" id="packageDiscount" placeholder="20" min="0" max="100" value="0">
              </div>
              <div class="form-group">
                <label class="form-label">Recommended Package</label>
                <div style="display: flex; align-items: center; gap: 8px; margin-top: 8px;">
                  <input type="checkbox" id="packageRecommended" style="width: 20px; height: 20px; cursor: pointer;">
                  <label for="packageRecommended" style="font-size: 14px; color: #666; cursor: pointer;">Mark as recommended package</label>
                </div>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Description</label>
              <textarea class="form-textarea" id="packageDescription" placeholder="Package description..." rows="3"></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-cancel" onclick="closeAddPackageModal()">Cancel</button>
          <button class="btn btn-submit" onclick="document.getElementById('addPackageForm').requestSubmit()">
            Add Package
          </button>
        </div>
      </div>
    </div>

    <!-- Play Detail Modal -->
    <div class="modal-overlay" id="playDetailModal">
      <div class="modal" style="max-width: 900px;">
        <div class="modal-header">
          <div class="modal-title">üìã Chi ti·∫øt phi√™n ch∆°i</div>
          <button class="modal-close" onclick="closePlayDetailModal()">√ó</button>
        </div>
        <div class="modal-body">
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Contest</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="playDetailContest">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">Date</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="playDetailDate">-</div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Score</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; font-weight: 600; color: #007aff;" id="playDetailScore">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">Rank</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; font-weight: 600; color: #ff9500;" id="playDetailRank">-</div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Time</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="playDetailTime">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">correct</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; font-weight: 600; color: #34c759;" id="playDetailCorrect">-</div>
            </div>
          </div>
          <div class="form-group" style="margin-top: 20px;">
            <label class="form-label">Question Timeline</label>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Question</th>
                    <th>Your Answer</th>
                    <th>Result</th>
                    <th>Time Used</th>
                  </tr>
                </thead>
                <tbody id="playDetailQuestionBody">
                  <tr>
                    <td colspan="5" style="text-align: center; color: #999;">No data</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-cancel" onclick="closePlayDetailModal()">Close</button>
        </div>
      </div>
    </div>

    <!-- User History Modal -->
    <div class="modal-overlay" id="userHistoryModal">
      <div class="modal" style="max-width: 800px;">
        <div class="modal-header" style="padding: 0;">
          <div class="user-info-header">
            <div class="user-avatar-large" id="historyUserAvatar">JD</div>
            <div class="user-info-details">
              <div class="user-info-name" id="historyUserName">John Doe</div>
              <div class="user-info-email" id="historyUserEmail">johndoe@example.com</div>
              <div class="user-info-school" id="historyUserSchool">High School ABC</div>
            </div>
            <button class="modal-close" onclick="closeUserHistoryModal()" style="background: rgba(255,255,255,0.2); color: white;">√ó</button>
          </div>
        </div>
        <div class="history-stats-grid">
          <div class="history-stat-box">
            <div class="history-stat-value" id="historyTotalPlays">3</div>
            <div class="history-stat-label">Total Plays</div>
          </div>
          <div class="history-stat-box">
            <div class="history-stat-value" id="historyHighestScore">92</div>
            <div class="history-stat-label">Highest Score</div>
          </div>
          <div class="history-stat-box">
            <div class="history-stat-value" id="historyBestRank">#25</div>
            <div class="history-stat-label">Best Rank</div>
          </div>
          <div class="history-stat-box">
            <div class="history-stat-value" id="historyAvgTime">38m</div>
            <div class="history-stat-label">Avg Time</div>
          </div>
        </div>
        <div class="modal-body" style="padding: 0;">
          <div style="padding: 20px; border-bottom: 1px solid #e5e5ea;">
            <div class="card-title">üìú Play History</div>
          </div>
          <div style="padding: 20px;">
            <div class="table-container">
              <table id="historyTable">
                <thead>
                  <tr>
                    <th>Contest</th>
                    <th>Date</th>
                    <th>Score</th>
                    <th>Rank</th>
                    <th>Time</th>
                    <th>Correct</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="historyListContainer">
                  <!-- History items will be loaded here -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-cancel" onclick="closeUserHistoryModal()">Close</button>
        </div>
      </div>
    </div>

    <!-- View Transaction Detail Modal -->
    <div class="modal-overlay" id="viewTransactionModal">
      <div class="modal" style="max-width: 800px;">
        <div class="modal-header">
          <div class="modal-title">üí≥ Transaction Details</div>
          <button class="modal-close" onclick="closeViewTransactionModal()">√ó</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label class="form-label">Transaction ID</label>
            <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; font-weight: 600; font-family: monospace;" id="viewTransactionId">-</div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Date & Time</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewTransactionTime">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">Status</label>
              <div id="viewTransactionStatusDisplay" style="display: inline-block; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 500;">-</div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Package</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewTransactionPackage">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">Contest</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewTransactionContest">-</div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Amount</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; font-weight: 600; color: #007aff; font-size: 18px;" id="viewTransactionAmount">-</div>
            </div>
            <div class="form-group">
              <label class="form-label">Payment Method</label>
              <div class="form-input" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px;" id="viewTransactionPaymentMethod">-</div>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Player Information</label>
            <div style="padding: 16px; background: #e3f2fd; border-radius: 8px; border: 2px solid #007aff;">
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                <div>
                  <div style="font-size: 12px; color: #666; margin-bottom: 4px;">Player Name</div>
                  <div style="font-weight: 600; color: #333; font-size: 15px;" id="viewTransactionPlayerName">-</div>
                </div>
                <div>
                  <div style="font-size: 12px; color: #666; margin-bottom: 4px;">Player Email</div>
                  <div style="font-weight: 600; color: #333; font-size: 15px;" id="viewTransactionPlayerEmail">-</div>
                </div>
                <div>
                  <div style="font-size: 12px; color: #666; margin-bottom: 4px;">School</div>
                  <div style="font-weight: 600; color: #007aff; font-size: 15px;" id="viewTransactionPlayerSchool">-</div>
                </div>
                <div>
                  <div style="font-size: 12px; color: #666; margin-bottom: 4px;">Player ID</div>
                  <div style="font-weight: 600; color: #333; font-size: 15px;" id="viewTransactionPlayerId">-</div>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Notes</label>
            <div class="form-textarea" style="background: #f5f5f5; padding: 12px; border: 1px solid #e5e5ea; border-radius: 8px; min-height: 80px; white-space: pre-wrap;" id="viewTransactionNotes">-</div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-cancel" onclick="closeViewTransactionModal()">Close</button>
        </div>
      </div>
    </div>

    <!-- Edit About Game Modal -->
    <div class="modal-overlay" id="editAboutGameModal">
      <div class="modal" style="max-width: 900px;">
        <div class="modal-header">
          <div class="modal-title">‚úèÔ∏è Edit About Game</div>
          <button class="modal-close" onclick="closeEditAboutGameModal()">√ó</button>
        </div>
        <div class="modal-body">
          <form id="editAboutGameForm" onsubmit="handleSubmitAboutGame(event)">
            <div class="form-group">
              <label class="form-label required">Title</label>
              <input type="text" class="form-input" id="aboutGameTitle" placeholder="E.g: GameEDU - Educational Gaming Platform" required>
            </div>
            
            <div class="form-group">
              <label class="form-label required">Description</label>
              <textarea class="form-textarea" id="aboutGameDescription" placeholder="Enter description about the game..." rows="5" required></textarea>
            </div>

            <div class="form-group">
              <label class="form-label required">A. M·ª•c ti√™u c·ªßa Game</label>
              <textarea class="form-textarea" id="aboutGameGoal" placeholder="E.g: Ch∆°i ‚Äì T√≠nh ƒëi·ªÉm ‚Äì X·∫øp h·∫°ng ‚Äì Nh·∫≠n th∆∞·ªüng." rows="3" required></textarea>
            </div>

            <div class="form-group">
              <label class="form-label required">B. C√°ch ch∆°i (How to Play)</label>
              <textarea class="form-textarea" id="aboutGameHowToPlay" placeholder="Enter how to play instructions..." rows="8" required></textarea>
              <div class="media-type-info">M·ªói b∆∞·ªõc tr√™n m·ªôt d√≤ng ri√™ng</div>
            </div>

            <div class="form-group">
              <label class="form-label required">C. Lu·∫≠t ch∆°i Game & T√≠nh ƒëi·ªÉm (Game Rules & Scoring)</label>
              <textarea class="form-textarea" id="aboutGameRules" placeholder="Enter game rules and scoring..." rows="8" required></textarea>
            </div>

            <div class="form-group">
              <label class="form-label required">D. Lu·∫≠t X·∫øp h·∫°ng (Ranking Rules)</label>
              <textarea class="form-textarea" id="aboutGameRanking" placeholder="Enter ranking rules..." rows="6" required></textarea>
            </div>

            <div class="form-group">
              <label class="form-label required">E. Th·ªÉ l·ªá Gi·∫£i th∆∞·ªüng (Reward Rules)</label>
              <textarea class="form-textarea" id="aboutGameRewards" placeholder="Enter reward rules..." rows="8" required></textarea>
            </div>

            <div class="form-group">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <label class="form-label required">Features</label>
                <button type="button" class="btn-sm btn-primary" onclick="addFeatureRow()">+ Add Feature</button>
              </div>
              <div id="featureList" style="display: flex; flex-direction: column; gap: 12px;">
                <!-- Features will be added here -->
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">Contact Email</label>
              <input type="email" class="form-input" id="aboutGameEmail" placeholder="support@gameedu.com">
            </div>

            <div class="form-group">
              <label class="form-label">Contact Phone</label>
              <input type="text" class="form-input" id="aboutGamePhone" placeholder="+95 9 123 456 789">
            </div>

            <div class="form-group">
              <label class="form-label">Address</label>
              <input type="text" class="form-input" id="aboutGameAddress" placeholder="Yangon, Myanmar">
            </div>

            <div class="form-group">
              <label class="form-label">Facebook URL</label>
              <input type="url" class="form-input" id="aboutGameFacebook" placeholder="https://facebook.com/gameedu">
            </div>

            <div class="form-group">
              <label class="form-label">Twitter URL</label>
              <input type="url" class="form-input" id="aboutGameTwitter" placeholder="https://twitter.com/gameedu">
            </div>

            <div class="form-group">
              <label class="form-label">Instagram URL</label>
              <input type="url" class="form-input" id="aboutGameInstagram" placeholder="https://instagram.com/gameedu">
            </div>

            <div class="form-group">
              <label class="form-label">Logo Image URL</label>
              <input type="url" class="form-input" id="aboutGameLogo" placeholder="https://example.com/logo.png">
              <div class="media-type-info">Enter URL of the logo image</div>
            </div>

            <div class="form-group">
              <label class="form-label">Hero Image URL</label>
              <input type="url" class="form-input" id="aboutGameHeroImage" placeholder="https://example.com/hero.jpg">
              <div class="media-type-info">Enter URL of the hero/banner image</div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-cancel" onclick="closeEditAboutGameModal()">Cancel</button>
          <button class="btn btn-submit" onclick="document.getElementById('editAboutGameForm').requestSubmit()">
            Save Changes
          </button>
        </div>
      </div>
    </div>

    <script>
      function showSection(sectionId) {
        // Hide all sections
        document.querySelectorAll(".content-section").forEach((section) => {
          section.classList.remove("active");
        });

        // Show selected section
        document.getElementById(sectionId).classList.add("active");

        // Update active nav link
        document.querySelectorAll(".nav-link").forEach((link) => {
          link.classList.remove("active");
        });
        event.target.closest(".nav-link").classList.add("active");

        // Load data for specific sections
        if (sectionId === 'transactions') {
          loadTransactions();
        } else if (sectionId === 'winners') {
          loadWinners();
        }
      }

      const AVAILABLE_SCHOOLS = [
        "High School ABC",
        "High School XYZ",
        "High School DEF",
        "High School GHI",
        "High School JKL"
      ];

      const prizePlayDetails = {
        "C002-1": {
          contestId: "C002",
          contestName: "Challenge 3",
          rank: 1,
          prizeAmount: 50000,
          description: "Top 1 - Highest score + fastest time",
          recipientName: "John Doe",
          recipientSchool: "High School ABC",
          recipientId: "U001",
          status: "pending",
          note: "Awarded on 20/01/2024",
          summary: {
            score: 98,
            correct: "49/50",
            totalTime: "32m 15s",
            avgTime: "38s"
          },
          questionDetails: [
            { number: 1, question: "Vocabulary warm-up", answer: "A", result: "Correct", timeUsed: "35s" },
            { number: 2, question: "Listening clip 1", answer: "B", result: "Correct", timeUsed: "42s" },
            { number: 3, question: "Grammar challenge", answer: "C", result: "Correct", timeUsed: "33s" },
            { number: 4, question: "Reading summary", answer: "D", result: "Correct", timeUsed: "40s" }
          ]
        },
        "C002-2": {
          contestId: "C002",
          contestName: "Challenge 3",
          rank: 2,
          prizeAmount: 30000,
          description: "Top 2 - 2nd highest score",
          recipientName: "Jane Smith",
          recipientSchool: "High School XYZ",
          recipientId: "U002",
          status: "pending",
          note: "Awarded on 20/01/2024",
          summary: {
            score: 97,
            correct: "48/50",
            totalTime: "33m 40s",
            avgTime: "40s"
          },
          questionDetails: [
            { number: 1, question: "Vocabulary warm-up", answer: "A", result: "Correct", timeUsed: "38s" },
            { number: 2, question: "Listening clip 1", answer: "B", result: "Correct", timeUsed: "41s" },
            { number: 3, question: "Grammar challenge", answer: "C", result: "Correct", timeUsed: "36s" },
            { number: 4, question: "Reading summary", answer: "C", result: "Correct", timeUsed: "44s" },
            { number: 5, question: "Speed bonus", answer: "A", result: "Correct", timeUsed: "29s" }
          ]
        },
        "C002-3": {
          contestId: "C002",
          contestName: "Challenge 3",
          rank: 3,
          prizeAmount: 20000,
          description: "Top 3 - 3rd highest score",
          recipientName: "Bob Johnson",
          recipientSchool: "High School DEF",
          recipientId: "U003",
          status: "pending",
          note: "Awarded on 20/01/2024",
          summary: {
            score: 96,
            correct: "48/50",
            totalTime: "34m 05s",
            avgTime: "41s"
          },
          questionDetails: [
            { number: 1, question: "Vocabulary warm-up", answer: "B", result: "Correct", timeUsed: "41s" },
            { number: 2, question: "Listening clip 1", answer: "B", result: "Correct", timeUsed: "45s" },
            { number: 3, question: "Grammar challenge", answer: "D", result: "Correct", timeUsed: "39s" },
            { number: 4, question: "Reading summary", answer: "C", result: "Correct", timeUsed: "47s" }
          ]
        }
      };

      function getSelectedSchools(containerId) {
        return Array.from(document.querySelectorAll(`#${containerId} input[type="checkbox"]`))
          .filter((checkbox) => checkbox.checked)
          .map((checkbox) => checkbox.value);
      }

      function setSelectedSchools(containerId, schools) {
        const selected = Array.isArray(schools) ? schools : [];
        document.querySelectorAll(`#${containerId} input[type="checkbox"]`).forEach((checkbox) => {
          checkbox.checked = selected.includes(checkbox.value);
        });
      }

      function resetSelectedSchools(containerId) {
        document.querySelectorAll(`#${containerId} input[type="checkbox"]`).forEach((checkbox) => {
          checkbox.checked = false;
        });
      }

      // ========== ADD CONTEST MODAL ==========
      function openAddContestModal() {
        document.getElementById("addContestModal").classList.add("show");
      }

      function closeAddContestModal() {
        document.getElementById("addContestModal").classList.remove("show");
        document.getElementById("addContestForm").reset();
        document.getElementById("prizeList").innerHTML = "";
        resetSelectedSchools("contestSchools");
      }

      function addPrizeRow() {
        const prizeList = document.getElementById("prizeList");
        const rowCount = prizeList.children.length + 1;
        const row = document.createElement("div");
        row.className = "prize-row";
        row.innerHTML = `
          <div class="form-group" style="flex: 1;">
            <label class="form-label">Rank</label>
            <input type="text" class="form-input" placeholder="E.g: 1, 2-5, 6-10" required>
          </div>
          <div class="form-group" style="flex: 2;">
            <label class="form-label">Description</label>
            <input type="text" class="form-input" placeholder="E.g: Top 1, Top 2-5" required>
          </div>
          <div class="form-group" style="flex: 1;">
            <label class="form-label">Prize (MMK)</label>
            <input type="number" class="form-input" placeholder="50000" min="0" required>
          </div>
          <button type="button" class="btn-sm btn-delete" onclick="this.parentElement.remove()">Delete</button>
        `;
        prizeList.appendChild(row);
      }

      function handleSubmitContest(event) {
        event.preventDefault();
        const formData = {
          name: document.getElementById("contestName").value,
          startDate: document.getElementById("contestStartDate").value,
          endDate: document.getElementById("contestEndDate").value,
          description: document.getElementById("contestDescription").value,
          freePlayLimit: document.getElementById("contestFreePlayLimit").value !== "" ? parseInt(document.getElementById("contestFreePlayLimit").value) : null,
          questionCount: parseInt(document.getElementById("contestQuestionCount").value),
          timePerQuestion: parseInt(document.getElementById("contestTimePerQuestion").value),
          subject: document.getElementById("contestSubject").value,
          topic: document.getElementById("contestTopic").value,
          schools: getSelectedSchools("contestSchools"),
          prizes: []
        };

        const prizeRows = document.querySelectorAll(".prize-row");
        prizeRows.forEach(row => {
          const inputs = row.querySelectorAll("input");
          formData.prizes.push({
            rank: inputs[0].value,
            description: inputs[1].value,
            amount: parseInt(inputs[2].value)
          });
        });

        if (!formData.name || !formData.startDate || !formData.endDate || !formData.questionCount || !formData.subject || !formData.topic) {
          alert("Please fill in all required fields!");
          return;
        }

        if (new Date(formData.startDate) >= new Date(formData.endDate)) {
          alert("End date must be after start date!");
          return;
        }

        if (formData.questionCount < 1) {
          alert("Number of questions must be greater than 0!");
          return;
        }

        if (isNaN(formData.timePerQuestion) || formData.timePerQuestion < 1) {
          alert("Time per question must be at least 1 second!");
          return;
        }

        if (formData.freePlayLimit !== null && formData.freePlayLimit < 0) {
          alert("Free play limit cannot be negative!");
          return;
        }

        if (formData.prizes.length === 0) {
          alert("Please add at least one prize!");
          return;
        }

        console.log("Contest Data:", formData);
        alert("Contest created successfully!");
        closeAddContestModal();
      }

      // ========== VIEW PRIZE MODAL ==========
      function viewPrizeDetail(prizeId) {
        const prize = prizePlayDetails[prizeId];
        if (!prize) {
          alert('No play detail available for this prize!');
          return;
        }

        document.getElementById('viewPrizeContest').textContent = prize.contestName || '-';
        document.getElementById('viewPrizeRank').textContent = prize.rank || '-';
        const amountNum = prize.prizeAmount ? Number(prize.prizeAmount) : null;
        document.getElementById('viewPrizeAmount').textContent = amountNum ? amountNum.toLocaleString('vi-VN') + ' MMK' : '-';
        document.getElementById('viewPrizeDescription').textContent = prize.description || '-';
        document.getElementById('viewPrizeNote').textContent = prize.note || '-';

        document.getElementById('viewWinnerNameDisplay').textContent = prize.recipientName || '-';
        document.getElementById('viewWinnerSchoolDisplay').textContent = prize.recipientSchool || '-';
        document.getElementById('viewWinnerIdDisplay').textContent = prize.recipientId || '-';

        document.getElementById('viewPrizeScore').textContent = prize.summary?.score ?? '-';
        document.getElementById('viewPrizeCorrect').textContent = prize.summary?.correct ?? '-';
        document.getElementById('viewPrizeTotalTime').textContent = prize.summary?.totalTime ?? '-';
        document.getElementById('viewPrizeAvgTime').textContent = prize.summary?.avgTime ?? '-';

        const questionBody = document.getElementById('viewPrizeQuestionBody');
        if (prize.questionDetails && prize.questionDetails.length) {
          questionBody.innerHTML = prize.questionDetails
            .map(item => `
              <tr>
                <td>${item.number}</td>
                <td>${item.question}</td>
                <td>${item.answer}</td>
                <td style="font-weight: 600; color: #34c759;">Correct</td>
                <td>${item.timeUsed}</td>
              </tr>
            `).join('');
        } else {
          questionBody.innerHTML = `
            <tr>
              <td colspan="5" style="text-align: center; color: #999;">No question breakdown available</td>
            </tr>
          `;
        }

        const statusDisplay = document.getElementById('viewPrizeStatusDisplay');
        if (prize.status === 'awarded') {
          statusDisplay.textContent = 'Awarded';
          statusDisplay.style.background = '#d4edda';
          statusDisplay.style.color = '#155724';
        } else if (prize.status === 'rejected') {
          statusDisplay.textContent = 'Rejected';
          statusDisplay.style.background = '#f8d7da';
          statusDisplay.style.color = '#721c24';
        } else {
          statusDisplay.textContent = 'Pending Review';
          statusDisplay.style.background = '#fff3cd';
          statusDisplay.style.color = '#856404';
        }

        document.getElementById('viewPrizeModal').classList.add('show');
      }

      function closeViewPrizeModal() {
        document.getElementById('viewPrizeModal').classList.remove('show');
      }

      function handlePrizeAction(prizeId, action) {
        const row = document.querySelector(`#prizes table tbody tr[data-prize-id="${prizeId}"]`);
        if (!row) {
          alert('Cannot locate this prize row.');
          return;
        }
        const badge = row.querySelector('.status-badge');
        if (!badge) return;

        if (action === 'accept') {
          badge.textContent = 'Accepted (temp)';
          badge.className = 'status-badge status-pending';
          row.dataset.decision = 'accept';
          if (prizePlayDetails[prizeId]) {
            prizePlayDetails[prizeId].status = 'accepted';
          }
          alert('Prize marked as accepted temporarily. Remember to use "Accept All" to finalize.');
        } else {
          badge.textContent = 'Rejected';
          badge.className = 'status-badge status-rejected';
          row.dataset.decision = 'reject';
          if (prizePlayDetails[prizeId]) {
            prizePlayDetails[prizeId].status = 'rejected';
          }
          alert('Prize marked as rejected.');
        }
      }

      function handleAcceptAllPrizes() {
        const rows = document.querySelectorAll('#prizes table tbody tr[data-decision="accept"]');
        if (!rows.length) {
          alert('No prizes are marked as accepted yet.');
          return;
        }
        rows.forEach(row => {
          const badge = row.querySelector('.status-badge');
          if (badge) {
            badge.textContent = 'Awarded';
            badge.className = 'status-badge status-active';
          }
          row.dataset.decision = 'finalized';
          const prizeId = row.dataset.prizeId;
          if (prizePlayDetails[prizeId]) {
            prizePlayDetails[prizeId].status = 'awarded';
          }
        });
        alert(`${rows.length} prize(s) have been approved.`);
      }

      // ========== EDIT PRIZE MODAL ==========
      function openEditPrizeModal(contestId, contestName, rank, amount, currentWinner, currentWinnerId, currentWinnerSchool, status, note) {
        // Set form values
        document.getElementById('editPrizeContest').value = contestName;
        document.getElementById('editPrizeRank').value = rank;
        document.getElementById('editPrizeAmount').value = amount;
        document.getElementById('editPrizeStatus').value = status;
        document.getElementById('editPrizeNote').value = note || '';
        
        // Display winner info
        const winnerNameDisplay = document.getElementById('winnerNameDisplay');
        const winnerSchoolDisplay = document.getElementById('winnerSchoolDisplay');
        
        if (currentWinner && currentWinnerSchool) {
          winnerNameDisplay.textContent = currentWinner;
          winnerSchoolDisplay.textContent = currentWinnerSchool;
        } else {
          winnerNameDisplay.textContent = 'No recipient';
          winnerSchoolDisplay.textContent = '-';
        }
        
        // Show modal
        document.getElementById('editPrizeModal').classList.add('show');
      }

      function closeEditPrizeModal() {
        document.getElementById('editPrizeModal').classList.remove('show');
        document.getElementById('editPrizeForm').reset();
      }

      function handleSubmitEditPrize(event) {
        event.preventDefault();
        const formData = {
          contest: document.getElementById('editPrizeContest').value,
          rank: document.getElementById('editPrizeRank').value,
          amount: parseInt(document.getElementById('editPrizeAmount').value),
          description: document.getElementById('editPrizeDescription').value,
          note: document.getElementById('editPrizeNote').value || null,
          status: document.getElementById('editPrizeStatus').value
        };

        if (!formData.contest || !formData.rank || !formData.amount) {
          alert("Please fill in all required fields!");
          return;
        }

        console.log("Prize Data:", formData);
        alert("Prize updated successfully!");
        closeEditPrizeModal();
      }

      // ========== VIEW CONTEST MODAL ==========
      function viewContestDetail(id, name, startDate, endDate, description, participants, freePlayLimit, timePerQuestion, schools, questionCount, subject, topic, status) {
        document.getElementById('viewContestId').textContent = id || '-';
        document.getElementById('viewContestName').textContent = name || '-';
        document.getElementById('viewContestStartDate').textContent = startDate ? new Date(startDate).toLocaleString('vi-VN') : '-';
        document.getElementById('viewContestEndDate').textContent = endDate ? new Date(endDate).toLocaleString('vi-VN') : '-';
        document.getElementById('viewContestDescription').textContent = description || '-';
        document.getElementById('viewContestParticipants').textContent = participants !== null ? participants : '-';
        document.getElementById('viewContestFreePlayLimit').textContent = (freePlayLimit || freePlayLimit === 0) ? `${freePlayLimit} turn(s)` : 'No limit';
        document.getElementById('viewContestQuestionCount').textContent = questionCount || '-';
        document.getElementById('viewContestTimePerQuestion').textContent = timePerQuestion ? `${timePerQuestion} seconds` : '-';
        document.getElementById('viewContestSubject').textContent = subject || '-';
        document.getElementById('viewContestTopic').textContent = topic || '-';
        document.getElementById('viewContestSchools').textContent = (schools && schools.length) ? schools.join(', ') : 'All schools';
        
        const statusDisplay = document.getElementById('viewContestStatusDisplay');
        if (status === 'upcoming') {
          statusDisplay.textContent = 'Upcoming';
          statusDisplay.style.background = '#fff3cd';
          statusDisplay.style.color = '#856404';
        } else if (status === 'active') {
          statusDisplay.textContent = 'Active';
          statusDisplay.style.background = '#d4edda';
          statusDisplay.style.color = '#155724';
        } else {
          statusDisplay.textContent = 'Ended';
          statusDisplay.style.background = '#f8d7da';
          statusDisplay.style.color = '#721c24';
        }
        
        document.getElementById('viewContestModal').classList.add('show');
      }

      function closeViewContestModal() {
        document.getElementById('viewContestModal').classList.remove('show');
      }

      // ========== EDIT CONTEST MODAL ==========
      function openEditContestModal(id, name, startDate, endDate, description, freePlayLimit, timePerQuestion, schools, questionCount, subject, topic) {
        document.getElementById('editContestId').value = id || '';
        document.getElementById('editContestName').value = name || '';
        document.getElementById('editContestStartDate').value = startDate || '';
        document.getElementById('editContestEndDate').value = endDate || '';
        document.getElementById('editContestDescription').value = description || '';
        document.getElementById('editContestFreePlayLimit').value = (freePlayLimit || freePlayLimit === 0) ? freePlayLimit : '';
        document.getElementById('editContestQuestionCount').value = questionCount || '';
        document.getElementById('editContestTimePerQuestion').value = timePerQuestion || '';
        document.getElementById('editContestSubject').value = subject || '';
        document.getElementById('editContestTopic').value = topic || '';
        setSelectedSchools('editContestSchools', schools);
        
        document.getElementById('editContestModal').classList.add('show');
      }

      function closeEditContestModal() {
        document.getElementById('editContestModal').classList.remove('show');
        document.getElementById('editContestForm').reset();
        resetSelectedSchools('editContestSchools');
      }

      function handleSubmitEditContest(event) {
        event.preventDefault();
        const formData = {
          id: document.getElementById('editContestId').value,
          name: document.getElementById('editContestName').value,
          startDate: document.getElementById('editContestStartDate').value,
          endDate: document.getElementById('editContestEndDate').value,
          description: document.getElementById('editContestDescription').value,
          freePlayLimit: document.getElementById('editContestFreePlayLimit').value !== '' ? parseInt(document.getElementById('editContestFreePlayLimit').value) : null,
          questionCount: parseInt(document.getElementById('editContestQuestionCount').value),
          timePerQuestion: parseInt(document.getElementById('editContestTimePerQuestion').value),
          subject: document.getElementById('editContestSubject').value,
          topic: document.getElementById('editContestTopic').value,
          schools: getSelectedSchools('editContestSchools')
        };

        if (!formData.name || !formData.startDate || !formData.endDate || !formData.questionCount || !formData.subject || !formData.topic || !formData.timePerQuestion) {
          alert("Please fill in all required fields!");
          return;
        }

        if (new Date(formData.startDate) >= new Date(formData.endDate)) {
          alert("End date must be after start date!");
          return;
        }

        if (formData.questionCount < 1) {
          alert("Number of questions must be greater than 0!");
          return;
        }

        if (isNaN(formData.timePerQuestion) || formData.timePerQuestion < 1) {
          alert("Time per question must be at least 1 second!");
          return;
        }

        if (formData.freePlayLimit !== null && formData.freePlayLimit < 0) {
          alert("Free play limit cannot be negative!");
          return;
        }

        console.log("Contest Data:", formData);
        alert("Contest updated successfully!");
        closeEditContestModal();
      }

      // ========== VIEW RESULT MODAL ==========
      function viewResultDetail(rank, user, score, time, correct, contest) {
        document.getElementById('viewResultRank').textContent = '#' + rank;
        document.getElementById('viewResultUser').textContent = user || '-';
        document.getElementById('viewResultScore').textContent = score || '-';
        document.getElementById('viewResultTime').textContent = time || '-';
        document.getElementById('viewResultCorrect').textContent = correct || '-';
        document.getElementById('viewResultContest').textContent = contest || '-';
        
        document.getElementById('viewResultModal').classList.add('show');
      }

      function closeViewResultModal() {
        document.getElementById('viewResultModal').classList.remove('show');
      }

      // ========== VIEW PACKAGE MODAL ==========
      function viewPackageDetail(id, name, turns, price, discount, recommended, sold) {
        document.getElementById('viewPackageId').textContent = id || '-';
        document.getElementById('viewPackageName').textContent = name || '-';
        document.getElementById('viewPackageTurns').textContent = turns || '-';
        document.getElementById('viewPackagePrice').textContent = price ? price.toLocaleString('vi-VN') + ' MMK' : '-';
        document.getElementById('viewPackageDiscount').textContent = discount ? discount + '%' : '0%';
        document.getElementById('viewPackageSold').textContent = sold !== null ? sold : '-';
        
        const recommendedDisplay = document.getElementById('viewPackageRecommendedDisplay');
        if (recommended) {
          recommendedDisplay.textContent = 'Yes';
          recommendedDisplay.style.background = '#d4edda';
          recommendedDisplay.style.color = '#155724';
        } else {
          recommendedDisplay.textContent = 'No';
          recommendedDisplay.style.background = '#f8d7da';
          recommendedDisplay.style.color = '#721c24';
        }
        
        document.getElementById('viewPackageModal').classList.add('show');
      }

      function closeViewPackageModal() {
        document.getElementById('viewPackageModal').classList.remove('show');
      }

      // ========== EDIT PACKAGE MODAL ==========
      function openEditPackageModal(id, name, turns, price, discount, recommended) {
        document.getElementById('editPackageId').value = id || '';
        document.getElementById('editPackageName').value = name || '';
        document.getElementById('editPackageTurns').value = turns || '';
        document.getElementById('editPackagePrice').value = price || '';
        document.getElementById('editPackageDiscount').value = discount || 0;
        document.getElementById('editPackageRecommended').value = recommended ? 'true' : 'false';
        
        document.getElementById('editPackageModal').classList.add('show');
      }

      function closeEditPackageModal() {
        document.getElementById('editPackageModal').classList.remove('show');
        document.getElementById('editPackageForm').reset();
      }

      function handleSubmitEditPackage(event) {
        event.preventDefault();
        const formData = {
          id: document.getElementById('editPackageId').value,
          name: document.getElementById('editPackageName').value,
          turns: parseInt(document.getElementById('editPackageTurns').value),
          price: parseInt(document.getElementById('editPackagePrice').value),
          discount: parseInt(document.getElementById('editPackageDiscount').value) || 0,
          recommended: document.getElementById('editPackageRecommended').value === 'true'
        };

        if (!formData.name || !formData.turns || !formData.price) {
          alert("Please fill in all required fields!");
          return;
        }

        console.log("Package Data:", formData);
        alert("Package updated successfully!");
        closeEditPackageModal();
      }

      // ========== ADD PACKAGE MODAL ==========
      function openAddPackageModal() {
        document.getElementById("addPackageModal").classList.add("show");
      }

      function closeAddPackageModal() {
        document.getElementById("addPackageModal").classList.remove("show");
        document.getElementById("addPackageForm").reset();
      }

      function handleSubmitPackage(event) {
        event.preventDefault();
        const formData = {
          name: document.getElementById("packageName").value,
          turns: parseInt(document.getElementById("packageTurns").value),
          price: parseInt(document.getElementById("packagePrice").value),
          discount: parseInt(document.getElementById("packageDiscount").value) || 0,
          recommended: document.getElementById("packageRecommended").checked,
          description: document.getElementById("packageDescription").value
        };

        if (!formData.name || !formData.turns || !formData.price) {
          alert("Please fill in all required fields!");
          return;
        }

        if (formData.turns < 1) {
          alert("Number of turns must be greater than 0!");
          return;
        }

        if (formData.price < 0) {
          alert("Price cannot be negative!");
          return;
        }

        if (formData.discount < 0 || formData.discount > 100) {
          alert("Discount must be between 0% and 100%!");
          return;
        }

        console.log("Package Data:", formData);
        alert("Package added successfully!");
        closeAddPackageModal();
      }

      // ========== USER HISTORY MODAL ==========
      // Sample history data for different users
      const userHistoryData = {
        '001': {
          name: 'John Doe',
          email: 'johndoe@example.com',
          school: 'High School ABC',
          avatar: 'JD',
          stats: {
            totalPlays: 3,
            highestScore: 92,
            bestRank: '#25',
            avgTime: '38m'
          },
          history: [
            {
              contestName: 'English Challenge 1',
              date: 'Jan 15, 2024 ‚Ä¢ 10:30 AM',
              score: 80,
              rank: '#25',
              time: '38m',
              status: 'Completed',
              questionDetails: [
                { number: 1, question: 'Vocabulary warm-up', answer: 'A', result: 'Correct', timeUsed: '35s' },
                { number: 2, question: 'Listening clip 1', answer: 'B', result: 'Correct', timeUsed: '42s' }
              ]
            },
            {
              contestName: 'English Challenge 2',
              date: 'Jan 12, 2024 ‚Ä¢ 2:15 PM',
              score: 72,
              rank: '#42',
              time: '42m',
              status: 'Completed',
              questionDetails: [
                { number: 1, question: 'Vocabulary warm-up', answer: 'A', result: 'Correct', timeUsed: '38s' }
              ]
            },
            {
              contestName: 'English Challenge 3',
              date: 'Jan 10, 2024 ‚Ä¢ 9:00 AM',
              score: 92,
              rank: '#20',
              time: '45m',
              status: 'Completed',
              questionDetails: [
                { number: 1, question: 'Vocabulary warm-up', answer: 'A', result: 'Correct', timeUsed: '35s' },
                { number: 2, question: 'Listening clip 1', answer: 'B', result: 'Correct', timeUsed: '42s' },
                { number: 3, question: 'Grammar challenge', answer: 'C', result: 'Correct', timeUsed: '33s' },
                { number: 4, question: 'Reading summary', answer: 'D', result: 'Correct', timeUsed: '40s' }
              ]
            }
          ]
        },
        '002': {
          name: 'Jane Smith',
          email: 'janesmith@example.com',
          school: 'High School XYZ',
          avatar: 'JS',
          stats: {
            totalPlays: 5,
            highestScore: 98,
            bestRank: '#1',
            avgTime: '35m'
          },
          history: [
            {
              contestName: 'English Challenge 3',
              date: 'Jan 18, 2024 ‚Ä¢ 11:20 AM',
              score: 98,
              rank: '#1',
              time: '32m',
              status: 'Completed',
              questionDetails: [
                { number: 1, question: 'Vocabulary warm-up', answer: 'A', result: 'Correct', timeUsed: '35s' },
                { number: 2, question: 'Listening clip 1', answer: 'B', result: 'Correct', timeUsed: '42s' },
                { number: 3, question: 'Grammar challenge', answer: 'C', result: 'Correct', timeUsed: '33s' },
                { number: 4, question: 'Reading summary', answer: 'D', result: 'Correct', timeUsed: '40s' },
                { number: 5, question: 'Speed bonus', answer: 'A', result: 'Correct', timeUsed: '29s' }
              ]
            },
            {
              contestName: 'English Challenge 2',
              date: 'Jan 13, 2024 ‚Ä¢ 3:45 PM',
              score: 97,
              rank: '#2',
              time: '35m',
              status: 'Completed',
              questionDetails: [
                { number: 1, question: 'Vocabulary warm-up', answer: 'A', result: 'Correct', timeUsed: '38s' },
                { number: 2, question: 'Listening clip 1', answer: 'B', result: 'Correct', timeUsed: '41s' },
                { number: 3, question: 'Grammar challenge', answer: 'C', result: 'Correct', timeUsed: '36s' },
                { number: 4, question: 'Reading summary', answer: 'C', result: 'Correct', timeUsed: '44s' },
                { number: 5, question: 'Speed bonus', answer: 'A', result: 'Correct', timeUsed: '29s' }
              ]
            },
            {
              contestName: 'English Challenge 1',
              date: 'Jan 5, 2024 ‚Ä¢ 8:15 AM',
              score: 95,
              rank: '#5',
              time: '38m',
              status: 'Completed',
              questionDetails: [
                { number: 1, question: 'Vocabulary warm-up', answer: 'A', result: 'Correct', timeUsed: '36s' },
                { number: 2, question: 'Listening clip 1', answer: 'B', result: 'Correct', timeUsed: '43s' },
                { number: 3, question: 'Grammar challenge', answer: 'C', result: 'Correct', timeUsed: '34s' },
                { number: 4, question: 'Reading summary', answer: 'D', result: 'Correct', timeUsed: '41s' }
              ]
            }
          ]
        },
        '003': {
          name: 'Bob Johnson',
          email: 'bobjohnson@example.com',
          school: 'High School DEF',
          avatar: 'BJ',
          stats: {
            totalPlays: 2,
            highestScore: 96,
            bestRank: '#3',
            avgTime: '40m'
          },
          history: [
            {
              contestName: 'English Challenge 2',
              date: 'Jan 14, 2024 ‚Ä¢ 1:30 PM',
              score: 96,
              rank: '#3',
              time: '40m',
              status: 'Completed',
              questionDetails: [
                { number: 1, question: 'Vocabulary warm-up', answer: 'B', result: 'Correct', timeUsed: '41s' },
                { number: 2, question: 'Listening clip 1', answer: 'B', result: 'Correct', timeUsed: '45s' },
                { number: 3, question: 'Grammar challenge', answer: 'D', result: 'Correct', timeUsed: '39s' },
                { number: 4, question: 'Reading summary', answer: 'C', result: 'Correct', timeUsed: '47s' }
              ]
            },
            {
              contestName: 'English Challenge 1',
              date: 'Jan 6, 2024 ‚Ä¢ 10:00 AM',
              score: 94,
              rank: '#8',
              time: '42m',
              status: 'Completed',
              questionDetails: [
                { number: 1, question: 'Vocabulary warm-up', answer: 'A', result: 'Correct', timeUsed: '37s' },
                { number: 2, question: 'Listening clip 1', answer: 'B', result: 'Correct', timeUsed: '44s' },
                { number: 3, question: 'Grammar challenge', answer: 'C', result: 'Correct', timeUsed: '35s' },
                { number: 4, question: 'Reading summary', answer: 'D', result: 'Correct', timeUsed: '42s' }
              ]
            }
          ]
        }
      };

      function viewUserHistory(userId, userName, userEmail, userSchool) {
        const userData = userHistoryData[userId];
        if (!userData) {
          alert('No history data found for this user!');
          return;
        }

        // Update user info
        document.getElementById('historyUserAvatar').textContent = userData.avatar;
        document.getElementById('historyUserName').textContent = userData.name;
        document.getElementById('historyUserEmail').textContent = userData.email;
        document.getElementById('historyUserSchool').textContent = userData.school;

        // Update stats
        document.getElementById('historyTotalPlays').textContent = userData.stats.totalPlays;
        document.getElementById('historyHighestScore').textContent = userData.stats.highestScore;
        document.getElementById('historyBestRank').textContent = userData.stats.bestRank;
        document.getElementById('historyAvgTime').textContent = userData.stats.avgTime;

        // Render history table
        const historyContainer = document.getElementById('historyListContainer');
        if (userData.history.length === 0) {
          historyContainer.innerHTML = `
            <tr>
              <td colspan="8" style="text-align: center; padding: 40px; color: #999;">
                <div style="font-size: 48px; margin-bottom: 16px;">üì≠</div>
                <div>No play history</div>
              </td>
            </tr>
          `;
        } else {
          let historyHTML = '';
          userData.history.forEach((item, index) => {
            // Calculate correct count from questionDetails (all questions are correct since wrong answer ends the game)
            const correctCount = item.questionDetails ? item.questionDetails.length : 0;
            historyHTML += `
              <tr>
                <td>${item.contestName || '-'}</td>
                <td>${item.date || '-'}</td>
                <td style="font-weight: 600; color: #007aff;">${item.score || '-'}</td>
                <td style="color: #ff9500;">${item.rank || '-'}</td>
                <td style="color: #34c759;">${item.time || '-'}</td>
                <td style="font-weight: 600; color: #34c759;">${correctCount}</td>
                <td>
                  <span class="status-badge status-active">${item.status || 'Completed'}</span>
                </td>
                <td>
                  <button class="btn-sm btn-view" onclick="viewPlayDetail('${userId}', ${index})">Xem chi ti·∫øt</button>
                </td>
              </tr>
            `;
          });
          historyContainer.innerHTML = historyHTML;
        }

        // Show modal
        document.getElementById('userHistoryModal').classList.add('show');
      }

      function closeUserHistoryModal() {
        document.getElementById('userHistoryModal').classList.remove('show');
      }

      // ========== VIEW PLAY DETAIL MODAL ==========
      function viewPlayDetail(userId, playIndex) {
        const userData = userHistoryData[userId];
        if (!userData || !userData.history[playIndex]) {
          alert('No play detail available!');
          return;
        }

        const play = userData.history[playIndex];
        const questionDetails = play.questionDetails || [];

        // Calculate correct count (all questions are correct since wrong answer ends the game)
        const correctCount = questionDetails.length;

        // Set play summary info
        document.getElementById('playDetailContest').textContent = play.contestName || '-';
        document.getElementById('playDetailDate').textContent = play.date || '-';
        document.getElementById('playDetailScore').textContent = play.score || '-';
        document.getElementById('playDetailRank').textContent = play.rank || '-';
        document.getElementById('playDetailTime').textContent = play.time || '-';
        document.getElementById('playDetailCorrect').textContent = correctCount || '0';

        // Render question timeline (only correct answers are shown since wrong answer ends the game)
        const questionBody = document.getElementById('playDetailQuestionBody');
        if (questionDetails.length > 0) {
          questionBody.innerHTML = questionDetails
            .map(item => `
              <tr>
                <td>${item.number}</td>
                <td>${item.question}</td>
                <td>${item.answer}</td>
                <td style="font-weight: 600; color: #34c759;">Correct</td>
                <td>${item.timeUsed}</td>
              </tr>
            `).join('');
        } else {
          questionBody.innerHTML = `
            <tr>
              <td colspan="5" style="text-align: center; color: #999;">No question details available</td>
            </tr>
          `;
        }

        // Show modal
        document.getElementById('playDetailModal').classList.add('show');
      }

      function closePlayDetailModal() {
        document.getElementById('playDetailModal').classList.remove('show');
      }

      // ========== SEARCH FUNCTIONS ==========
      function searchUsers() {
        const searchTerm = document.getElementById('searchUsers')?.value.toLowerCase() || '';
        const rows = document.querySelectorAll('#player table tbody tr');
        
        rows.forEach(row => {
          const text = row.textContent.toLowerCase();
          row.style.display = text.includes(searchTerm) ? '' : 'none';
        });
      }

      function searchContests() {
        const searchTerm = document.getElementById('searchContests')?.value.toLowerCase() || '';
        const rows = document.querySelectorAll('#contests table tbody tr');
        
        rows.forEach(row => {
          const text = row.textContent.toLowerCase();
          row.style.display = text.includes(searchTerm) ? '' : 'none';
        });
      }

      function searchResults() {
        const searchTerm = document.getElementById('searchResults')?.value.toLowerCase() || '';
        const filterContest = document.getElementById('filterContest')?.value.toLowerCase() || '';
        const rows = document.querySelectorAll('#results table tbody tr');
        
        rows.forEach(row => {
          const text = row.textContent.toLowerCase();
          const matchesSearch = text.includes(searchTerm);
          const matchesFilter = !filterContest || text.includes(filterContest);
          row.style.display = (matchesSearch && matchesFilter) ? '' : 'none';
        });
      }

      function searchPrizes() {
        const searchTerm = document.getElementById('searchPrizes')?.value.toLowerCase() || '';
        const filterContest = document.getElementById('filterPrizeContest')?.value.toLowerCase() || '';
        const rows = document.querySelectorAll('#prizes table tbody tr');
        
        rows.forEach(row => {
          const text = row.textContent.toLowerCase();
          const contest = row.dataset.contest || '';
          const matchesSearch = text.includes(searchTerm);
          const matchesFilter = !filterContest || contest === filterContest;
          row.style.display = (matchesSearch && matchesFilter) ? '' : 'none';
        });
      }

      function searchPackages() {
        const searchTerm = document.getElementById('searchPackages')?.value.toLowerCase() || '';
        const rows = document.querySelectorAll('#packages table tbody tr');
        
        rows.forEach(row => {
          const text = row.textContent.toLowerCase();
          row.style.display = text.includes(searchTerm) ? '' : 'none';
        });
      }

      // ========== ABOUT GAME CMS ==========
      // Sample data for About Game
      let aboutGameData = {
        title: "GameEDU - Educational Gaming Platform",
        description: "GameEDU is an innovative educational gaming platform designed to make learning fun and engaging. Students can participate in exciting contests, test their knowledge, and compete for prizes while improving their skills.",
        gameGoal: "Ch∆°i ‚Äì T√≠nh ƒëi·ªÉm ‚Äì X·∫øp h·∫°ng ‚Äì Nh·∫≠n th∆∞·ªüng.",
        howToPlay: "Ch·ªçn S·ª± ki·ªán: Ch·ªçn m·ªôt s·ª± ki·ªán (Event) ƒëang di·ªÖn ra\n\nB·∫Øt ƒë·∫ßu ch∆°i: Nh·∫•n v√†o Ng√†y hi·ªán t·∫°i ƒë·ªÉ b·∫Øt ƒë·∫ßu phi√™n ch∆°i.\n\nTr·∫£ l·ªùi C√¢u h·ªèi: Tr·∫£ l·ªùi t·ª´ng c√¢u h·ªèi theo th·ª© t·ª± trong th·ªùi gian quy ƒë·ªãnh cho m·ªói c√¢u.\n\nK·∫øt th√∫c Phi√™n ch∆°i: Phi√™n ch∆°i k·∫øt th√∫c ngay l·∫≠p t·ª©c n·∫øu ng∆∞·ªùi ch∆°i tr·∫£ l·ªùi sai ho·∫∑c h·∫øt th·ªùi gian cho c√¢u h·ªèi hi·ªán t·∫°i.\n\nT√≠nh to√°n & X·∫øp h·∫°ng: H·ªá th·ªëng t√≠nh to√°n t·ªïng ƒëi·ªÉm v√† th·ªùi gian ƒë·∫°t ƒë∆∞·ª£c, sau ƒë√≥ so s√°nh k·∫øt qu·∫£ ƒë·ªÉ x·∫øp h·∫°ng.",
        gameRules: "T√≠nh ƒëi·ªÉm: M·ªói c√¢u h·ªèi tr·∫£ l·ªùi ƒë√∫ng s·∫Ω ƒë∆∞·ª£c c·ªông m·ªôt s·ªë ƒëi·ªÉm nh·∫•t ƒë·ªãnh (+X ƒëi·ªÉm), ph·ª• thu·ªôc v√†o ƒë·ªô kh√≥ c·ªßa c√¢u h·ªèi.\n\nTr·∫£ l·ªùi c√†ng nhanh th√¨ th·ªùi gian ho√†n th√†nh c√†ng √≠t.\n\nKh√¥ng gi·ªõi h·∫°n s·ªë l∆∞·ª£ng c√¢u h·ªèi. Ng∆∞·ªùi ch∆°i s·∫Ω ch∆°i li√™n t·ª•c cho ƒë·∫øn khi phi√™n ch∆°i k·∫øt th√∫c.\n\nPhi√™n ch∆°i s·∫Ω k·∫øt th√∫c khi:\n+ Ng∆∞·ªùi ch∆°i tr·∫£ l·ªùi sai c√¢u h·ªèi.\n+ Ng∆∞·ªùi ch∆°i h·∫øt th·ªùi gian quy ƒë·ªãnh ƒë·ªÉ tr·∫£ l·ªùi c√¢u h·ªèi hi·ªán t·∫°i.",
        rankingRules: "∆Øu ti√™n 1 (ƒêi·ªÉm): ƒêi·ªÉm s·ªë cao nh·∫•t.\n\n∆Øu ti√™n 2 (Th·ªùi gian): N·∫øu b·∫±ng ƒëi·ªÉm, ng∆∞·ªùi c√≥ th·ªùi gian ho√†n th√†nh th·∫•p h∆°n s·∫Ω x·∫øp tr√™n.\n\n∆Øu ti√™n 3 (Th·ªùi ƒëi·ªÉm): N·∫øu b·∫±ng ƒëi·ªÉm v√† b·∫±ng th·ªùi gian, ng∆∞·ªùi ƒë·∫°t k·∫øt qu·∫£ s·ªõm h∆°n s·∫Ω x·∫øp tr√™n.",
        rewardRules: "M·ªói s·ª± ki·ªán (Event) s·∫Ω c√≥ c∆° c·∫•u gi·∫£i th∆∞·ªüng ri√™ng (v√≠ d·ª•: h·ªçc b·ªïng MytelPay).\n\nPh√¢n b·ªï theo Rank:\nRank #1: Gi·∫£i V√†ng\nRank #2‚Äì3: Gi·∫£i B·∫°c\nRank #4‚Äì10: Gi·∫£i ƒê·ªìng\n\nGi·∫£i th∆∞·ªüng ch·ªâ ƒë∆∞·ª£c trao sau khi s·ª± ki·ªán k·∫øt th√∫c v√† k·∫øt qu·∫£ ƒë∆∞·ª£c x√°c nh·∫≠n.\n\nNg∆∞·ªùi ch∆°i c√≥ th·ªÉ ki·ªÉm tra c√°c ph·∫ßn th∆∞·ªüng c·ªßa m√¨nh trong m·ª•c Rewards ho·∫∑c Notification c·ªßa h·ªá th·ªëng.",
        features: [
          "Interactive quizzes and challenges",
          "Real-time leaderboards",
          "Prize competitions",
          "Multiple subjects and topics"
        ],
        contact: {
          email: "support@gameedu.com",
          phone: "+95 9 123 456 789",
          address: "Yangon, Myanmar"
        },
        social: {
          facebook: "facebook.com/gameedu",
          twitter: "@gameedu",
          instagram: "@gameedu"
        },
        images: {
          logo: "",
          heroImage: ""
        }
      };

      function openEditAboutGameModal() {
        // Load current data into form
        document.getElementById('aboutGameTitle').value = aboutGameData.title || '';
        document.getElementById('aboutGameDescription').value = aboutGameData.description || '';
        document.getElementById('aboutGameGoal').value = aboutGameData.gameGoal || '';
        document.getElementById('aboutGameHowToPlay').value = aboutGameData.howToPlay || '';
        document.getElementById('aboutGameRules').value = aboutGameData.gameRules || '';
        document.getElementById('aboutGameRanking').value = aboutGameData.rankingRules || '';
        document.getElementById('aboutGameRewards').value = aboutGameData.rewardRules || '';
        document.getElementById('aboutGameEmail').value = aboutGameData.contact?.email || '';
        document.getElementById('aboutGamePhone').value = aboutGameData.contact?.phone || '';
        document.getElementById('aboutGameAddress').value = aboutGameData.contact?.address || '';
        document.getElementById('aboutGameFacebook').value = aboutGameData.social?.facebook || '';
        document.getElementById('aboutGameTwitter').value = aboutGameData.social?.twitter || '';
        document.getElementById('aboutGameInstagram').value = aboutGameData.social?.instagram || '';
        document.getElementById('aboutGameLogo').value = aboutGameData.images?.logo || '';
        document.getElementById('aboutGameHeroImage').value = aboutGameData.images?.heroImage || '';

        // Load features
        const featureList = document.getElementById('featureList');
        featureList.innerHTML = '';
        if (aboutGameData.features && aboutGameData.features.length > 0) {
          aboutGameData.features.forEach((feature, index) => {
            addFeatureRow(feature);
          });
        } else {
          addFeatureRow();
        }

        document.getElementById('editAboutGameModal').classList.add('show');
      }

      function closeEditAboutGameModal() {
        document.getElementById('editAboutGameModal').classList.remove('show');
        document.getElementById('editAboutGameForm').reset();
      }

      function addFeatureRow(featureText = '') {
        const featureList = document.getElementById('featureList');
        const row = document.createElement('div');
        row.className = 'answer-item';
        row.innerHTML = `
          <input type="text" class="answer-input" placeholder="Enter feature description..." value="${featureText}" required>
          <button type="button" class="btn-sm btn-delete" onclick="this.parentElement.remove()">Delete</button>
        `;
        featureList.appendChild(row);
      }

      function handleSubmitAboutGame(event) {
        event.preventDefault();
        
        // Get form data
        const formData = {
          title: document.getElementById('aboutGameTitle').value,
          description: document.getElementById('aboutGameDescription').value,
          gameGoal: document.getElementById('aboutGameGoal').value,
          howToPlay: document.getElementById('aboutGameHowToPlay').value,
          gameRules: document.getElementById('aboutGameRules').value,
          rankingRules: document.getElementById('aboutGameRanking').value,
          rewardRules: document.getElementById('aboutGameRewards').value,
          features: [],
          contact: {
            email: document.getElementById('aboutGameEmail').value,
            phone: document.getElementById('aboutGamePhone').value,
            address: document.getElementById('aboutGameAddress').value
          },
          social: {
            facebook: document.getElementById('aboutGameFacebook').value,
            twitter: document.getElementById('aboutGameTwitter').value,
            instagram: document.getElementById('aboutGameInstagram').value
          },
          images: {
            logo: document.getElementById('aboutGameLogo').value,
            heroImage: document.getElementById('aboutGameHeroImage').value
          }
        };

        // Get features
        const featureInputs = document.querySelectorAll('#featureList .answer-input');
        featureInputs.forEach(input => {
          if (input.value.trim()) {
            formData.features.push(input.value.trim());
          }
        });

        if (!formData.title || !formData.description || !formData.gameGoal || 
            !formData.howToPlay || !formData.gameRules || !formData.rankingRules || !formData.rewardRules) {
          alert("Please fill in all required fields!");
          return;
        }

        if (formData.features.length === 0) {
          alert("Please add at least one feature!");
          return;
        }

        // Update data
        aboutGameData = formData;

        // Update preview
        updateAboutGamePreview();

        console.log("About Game Data:", formData);
        alert("About Game content updated successfully!");
        closeEditAboutGameModal();
      }

      function updateAboutGamePreview() {
        // Update title
        document.getElementById('previewTitle').textContent = aboutGameData.title || 'GameEDU - Educational Gaming Platform';
        
        // Update description
        document.getElementById('previewDescription').textContent = aboutGameData.description || '';

        // Update game goal
        document.getElementById('previewGameGoal').textContent = aboutGameData.gameGoal || 'Ch∆°i ‚Äì T√≠nh ƒëi·ªÉm ‚Äì X·∫øp h·∫°ng ‚Äì Nh·∫≠n th∆∞·ªüng.';

        // Update how to play
        document.getElementById('previewHowToPlay').textContent = aboutGameData.howToPlay || '';

        // Update game rules
        document.getElementById('previewGameRules').textContent = aboutGameData.gameRules || '';

        // Update ranking rules
        document.getElementById('previewRankingRules').textContent = aboutGameData.rankingRules || '';

        // Update reward rules
        document.getElementById('previewRewardRules').textContent = aboutGameData.rewardRules || '';

        // Update features
        const featuresList = document.getElementById('previewFeatures');
        if (aboutGameData.features && aboutGameData.features.length > 0) {
          featuresList.innerHTML = aboutGameData.features
            .map(feature => `<li style="padding: 8px 0; color: #666;">‚úì ${feature}</li>`)
            .join('');
        } else {
          featuresList.innerHTML = '<li style="padding: 8px 0; color: #666;">No features added</li>';
        }

        // Update contact
        const contactDiv = document.getElementById('previewContact');
        contactDiv.innerHTML = `
          <p style="margin: 4px 0;">Email: ${aboutGameData.contact?.email || '-'}</p>
          <p style="margin: 4px 0;">Phone: ${aboutGameData.contact?.phone || '-'}</p>
          <p style="margin: 4px 0;">Address: ${aboutGameData.contact?.address || '-'}</p>
        `;

        // Update social
        const socialDiv = document.getElementById('previewSocial');
        socialDiv.innerHTML = `
          <p style="margin: 4px 0;">Facebook: ${aboutGameData.social?.facebook || '-'}</p>
          <p style="margin: 4px 0;">Twitter: ${aboutGameData.social?.twitter || '-'}</p>
          <p style="margin: 4px 0;">Instagram: ${aboutGameData.social?.instagram || '-'}</p>
        `;
      }

      // Initialize preview on page load
      document.addEventListener('DOMContentLoaded', function() {
        updateAboutGamePreview();
        loadTransactions();
        loadWinners();
      });

      // ========== TRANSACTION HISTORY ==========
      // Sample transaction data
      const transactionData = [
        {
          id: 1,
          transactionId: 'TXN-2024-001234',
          time: '2024-01-20 10:30:45',
          package: '5 Turns (Recommended)',
          packageId: 'P003',
          contest: 'English Challenge 3',
          contestId: 'C002',
          amount: 400,
          status: 'completed',
          paymentMethod: 'Mobile Payment',
          player: {
            id: 'U001',
            name: 'John Doe',
            email: 'johndoe@example.com',
            school: 'High School ABC'
          },
          notes: 'Payment successful via MytelPay'
        },
        {
          id: 2,
          transactionId: 'TXN-2024-001235',
          time: '2024-01-20 11:15:22',
          package: '3 Turns',
          packageId: 'P002',
          contest: 'English Challenge 3',
          contestId: 'C002',
          amount: 270,
          status: 'completed',
          paymentMethod: 'Bank Transfer',
          player: {
            id: 'U002',
            name: 'Jane Smith',
            email: 'janesmith@example.com',
            school: 'High School XYZ'
          },
          notes: 'Payment verified'
        },
        {
          id: 3,
          transactionId: 'TXN-2024-001236',
          time: '2024-01-20 12:45:10',
          package: '10 Turns',
          packageId: 'P004',
          contest: 'English Challenge 2',
          contestId: 'C003',
          amount: 700,
          status: 'pending',
          paymentMethod: 'Mobile Payment',
          player: {
            id: 'U003',
            name: 'Bob Johnson',
            email: 'bobjohnson@example.com',
            school: 'High School DEF'
          },
          notes: 'Awaiting payment confirmation'
        },
        {
          id: 4,
          transactionId: 'TXN-2024-001237',
          time: '2024-01-19 14:20:33',
          package: '1 Turn',
          packageId: 'P001',
          contest: 'English Challenge 2',
          contestId: 'C003',
          amount: 100,
          status: 'failed',
          paymentMethod: 'Mobile Payment',
          player: {
            id: 'U001',
            name: 'John Doe',
            email: 'johndoe@example.com',
            school: 'High School ABC'
          },
          notes: 'Payment failed - Insufficient balance'
        },
        {
          id: 5,
          transactionId: 'TXN-2024-001238',
          time: '2024-01-19 16:55:18',
          package: '5 Turns (Recommended)',
          packageId: 'P003',
          contest: 'English Challenge 1',
          contestId: 'C004',
          amount: 400,
          status: 'completed',
          paymentMethod: 'Credit Card',
          player: {
            id: 'U002',
            name: 'Jane Smith',
            email: 'janesmith@example.com',
            school: 'High School XYZ'
          },
          notes: 'Payment successful'
        },
        {
          id: 6,
          transactionId: 'TXN-2024-001239',
          time: '2024-01-18 09:10:55',
          package: '3 Turns',
          packageId: 'P002',
          contest: 'English Challenge 1',
          contestId: 'C004',
          amount: 270,
          status: 'cancelled',
          paymentMethod: 'Mobile Payment',
          player: {
            id: 'U003',
            name: 'Bob Johnson',
            email: 'bobjohnson@example.com',
            school: 'High School DEF'
          },
          notes: 'Transaction cancelled by user'
        },
        {
          id: 7,
          transactionId: 'TXN-2024-001240',
          time: '2024-01-18 13:30:42',
          package: '10 Turns',
          packageId: 'P004',
          contest: 'English Challenge 3',
          contestId: 'C002',
          amount: 700,
          status: 'completed',
          paymentMethod: 'Bank Transfer',
          player: {
            id: 'U001',
            name: 'John Doe',
            email: 'johndoe@example.com',
            school: 'High School ABC'
          },
          notes: 'Payment successful'
        },
        {
          id: 8,
          transactionId: 'TXN-2024-001241',
          time: '2024-01-17 15:45:27',
          package: '5 Turns (Recommended)',
          packageId: 'P003',
          contest: 'English Challenge 2',
          contestId: 'C003',
          amount: 400,
          status: 'completed',
          paymentMethod: 'Mobile Payment',
          player: {
            id: 'U002',
            name: 'Jane Smith',
            email: 'janesmith@example.com',
            school: 'High School XYZ'
          },
          notes: 'Payment successful via MytelPay'
        }
      ];

      function loadTransactions() {
        const tbody = document.getElementById('transactionTableBody');
        if (!tbody) return;

        if (transactionData.length === 0) {
          tbody.innerHTML = `
            <tr>
              <td colspan="9" style="text-align: center; padding: 40px; color: #999;">
                <div style="font-size: 48px; margin-bottom: 16px;">üì≠</div>
                <div>No transactions found</div>
              </td>
            </tr>
          `;
          return;
        }

        let html = '';
        transactionData.forEach((transaction, index) => {
          const statusBadge = getStatusBadge(transaction.status);
          html += `
            <tr>
              <td>${index + 1}</td>
              <td style="font-family: monospace; font-weight: 600;">${transaction.transactionId}</td>
              <td>${formatDateTime(transaction.time)}</td>
              <td>${transaction.player?.name || '-'}</td>
              <td>${transaction.package}</td>
              <td>${transaction.contest}</td>
              <td style="font-weight: 600; color: #007aff;">${transaction.amount.toLocaleString('vi-VN')} MMK</td>
              <td>${statusBadge}</td>
              <td>
                <div class="action-buttons">
                  <button class="btn-sm btn-view" onclick="viewTransactionDetail(${transaction.id})">View</button>
                </div>
              </td>
            </tr>
          `;
        });
        tbody.innerHTML = html;
      }

      function getStatusBadge(status) {
        const badges = {
          'completed': '<span class="status-badge status-active">Completed</span>',
          'pending': '<span class="status-badge status-pending">Pending</span>',
          'failed': '<span class="status-badge status-rejected">Failed</span>',
          'cancelled': '<span class="status-badge status-ended">Cancelled</span>'
        };
        return badges[status] || '<span class="status-badge status-pending">Unknown</span>';
      }

      function formatDateTime(dateTimeString) {
        const date = new Date(dateTimeString);
        return date.toLocaleString('vi-VN', {
          year: 'numeric',
          month: '2-digit',
          day: '2-digit',
          hour: '2-digit',
          minute: '2-digit',
          second: '2-digit'
        });
      }

      function viewTransactionDetail(transactionId) {
        const transaction = transactionData.find(t => t.id === transactionId);
        if (!transaction) {
          alert('Transaction not found!');
          return;
        }

        document.getElementById('viewTransactionId').textContent = transaction.transactionId || '-';
        document.getElementById('viewTransactionTime').textContent = formatDateTime(transaction.time) || '-';
        document.getElementById('viewTransactionPackage').textContent = transaction.package || '-';
        document.getElementById('viewTransactionContest').textContent = transaction.contest || '-';
        document.getElementById('viewTransactionAmount').textContent = transaction.amount ? transaction.amount.toLocaleString('vi-VN') + ' MMK' : '-';
        document.getElementById('viewTransactionPaymentMethod').textContent = transaction.paymentMethod || '-';
        document.getElementById('viewTransactionPlayerName').textContent = transaction.player?.name || '-';
        document.getElementById('viewTransactionPlayerEmail').textContent = transaction.player?.email || '-';
        document.getElementById('viewTransactionPlayerSchool').textContent = transaction.player?.school || '-';
        document.getElementById('viewTransactionPlayerId').textContent = transaction.player?.id || '-';
        document.getElementById('viewTransactionNotes').textContent = transaction.notes || '-';

        const statusDisplay = document.getElementById('viewTransactionStatusDisplay');
        if (transaction.status === 'completed') {
          statusDisplay.textContent = 'Completed';
          statusDisplay.style.background = '#d4edda';
          statusDisplay.style.color = '#155724';
        } else if (transaction.status === 'pending') {
          statusDisplay.textContent = 'Pending';
          statusDisplay.style.background = '#fff3cd';
          statusDisplay.style.color = '#856404';
        } else if (transaction.status === 'failed') {
          statusDisplay.textContent = 'Failed';
          statusDisplay.style.background = '#f8d7da';
          statusDisplay.style.color = '#721c24';
        } else if (transaction.status === 'cancelled') {
          statusDisplay.textContent = 'Cancelled';
          statusDisplay.style.background = '#e2e3e5';
          statusDisplay.style.color = '#383d41';
        } else {
          statusDisplay.textContent = 'Unknown';
          statusDisplay.style.background = '#e2e3e5';
          statusDisplay.style.color = '#383d41';
        }

        document.getElementById('viewTransactionModal').classList.add('show');
      }

      function closeViewTransactionModal() {
        document.getElementById('viewTransactionModal').classList.remove('show');
      }

      function searchTransactions() {
        const searchTerm = document.getElementById('searchTransactions')?.value.toLowerCase() || '';
        const filterStatus = document.getElementById('filterTransactionStatus')?.value.toLowerCase() || '';
        const filterContest = document.getElementById('filterTransactionContest')?.value.toLowerCase() || '';
        const rows = document.querySelectorAll('#transactions table tbody tr');
        
        rows.forEach(row => {
          const text = row.textContent.toLowerCase();
          const matchesSearch = text.includes(searchTerm);
          const matchesStatus = !filterStatus || text.includes(filterStatus);
          const matchesContest = !filterContest || text.includes(filterContest);
          row.style.display = (matchesSearch && matchesStatus && matchesContest) ? '' : 'none';
        });
      }

      function exportTransactions() {
        // In a real application, this would export to CSV/Excel
        alert('Exporting transaction report...\n\nThis feature will export all transactions to a CSV file.');
        console.log('Exporting transactions:', transactionData);
      }

      // ========== WINNERS INFORMATION MODULE ==========
      const winnersData = [
        {
          id: 1,
          studentId: 'STU-2024-001',
          fullName: 'Nguy·ªÖn VƒÉn An',
          school: 'ƒê·∫°i h·ªçc B√°ch Khoa H√† N·ªôi',
          contest: 'English Challenge 3',
          rank: 1,
          prizeAmount: 5000000,
          accountNumber: '1234567890',
          bank: 'Vietcombank',
          status: 'completed'
        },
        {
          id: 2,
          studentId: 'STU-2024-002',
          fullName: 'Tr·∫ßn Th·ªã B√¨nh',
          school: 'ƒê·∫°i h·ªçc Kinh t·∫ø Qu·ªëc d√¢n',
          contest: 'English Challenge 3',
          rank: 2,
          prizeAmount: 3000000,
          accountNumber: '0987654321',
          bank: 'BIDV',
          status: 'completed'
        },
        {
          id: 3,
          studentId: 'STU-2024-003',
          fullName: 'L√™ VƒÉn C∆∞·ªùng',
          school: 'ƒê·∫°i h·ªçc Ngo·∫°i th∆∞∆°ng',
          contest: 'English Challenge 3',
          rank: 3,
          prizeAmount: 3000000,
          accountNumber: '1122334455',
          bank: 'Techcombank',
          status: 'processing'
        },
        {
          id: 4,
          studentId: 'STU-2024-004',
          fullName: 'Ph·∫°m Th·ªã Dung',
          school: 'ƒê·∫°i h·ªçc S∆∞ ph·∫°m H√† N·ªôi',
          contest: 'English Challenge 3',
          rank: 4,
          prizeAmount: 2000000,
          accountNumber: '5566778899',
          bank: 'Vietinbank',
          status: 'pending'
        },
        {
          id: 5,
          studentId: 'STU-2024-005',
          fullName: 'Ho√†ng VƒÉn Em',
          school: 'ƒê·∫°i h·ªçc C√¥ng ngh·ªá',
          contest: 'English Challenge 3',
          rank: 5,
          prizeAmount: 2000000,
          accountNumber: '9988776655',
          bank: 'ACB',
          status: 'pending'
        },
        {
          id: 6,
          studentId: 'STU-2024-006',
          fullName: 'V≈© Th·ªã Ph∆∞∆°ng',
          school: 'ƒê·∫°i h·ªçc B√°ch Khoa H√† N·ªôi',
          contest: 'English Challenge 2',
          rank: 1,
          prizeAmount: 5000000,
          accountNumber: '4433221100',
          bank: 'Vietcombank',
          status: 'completed'
        },
        {
          id: 7,
          studentId: 'STU-2024-007',
          fullName: 'ƒê·ªó VƒÉn Giang',
          school: 'ƒê·∫°i h·ªçc Kinh t·∫ø Qu·ªëc d√¢n',
          contest: 'English Challenge 2',
          rank: 2,
          prizeAmount: 3000000,
          accountNumber: '6677889900',
          bank: 'BIDV',
          status: 'completed'
        },
        {
          id: 8,
          studentId: 'STU-2024-008',
          fullName: 'B√πi Th·ªã Hoa',
          school: 'ƒê·∫°i h·ªçc Ngo·∫°i th∆∞∆°ng',
          contest: 'English Challenge 2',
          rank: 3,
          prizeAmount: 3000000,
          accountNumber: '0011223344',
          bank: 'Techcombank',
          status: 'processing'
        },
        {
          id: 9,
          studentId: 'STU-2024-009',
          fullName: 'Ng√¥ VƒÉn √çch',
          school: 'ƒê·∫°i h·ªçc S∆∞ ph·∫°m H√† N·ªôi',
          contest: 'English Challenge 1',
          rank: 1,
          prizeAmount: 5000000,
          accountNumber: '2233445566',
          bank: 'Vietinbank',
          status: 'completed'
        },
        {
          id: 10,
          studentId: 'STU-2024-010',
          fullName: 'ƒêinh Th·ªã Kim',
          school: 'ƒê·∫°i h·ªçc C√¥ng ngh·ªá',
          contest: 'English Challenge 1',
          rank: 2,
          prizeAmount: 3000000,
          accountNumber: '7788990011',
          bank: 'ACB',
          status: 'completed'
        },
        {
          id: 11,
          studentId: 'STU-2024-011',
          fullName: 'L√Ω VƒÉn Long',
          school: 'ƒê·∫°i h·ªçc B√°ch Khoa H√† N·ªôi',
          contest: 'English Challenge 3',
          rank: 6,
          prizeAmount: 2000000,
          accountNumber: '3344556677',
          bank: 'Vietcombank',
          status: 'pending'
        },
        {
          id: 12,
          studentId: 'STU-2024-012',
          fullName: 'Mai Th·ªã Mai',
          school: 'ƒê·∫°i h·ªçc Kinh t·∫ø Qu·ªëc d√¢n',
          contest: 'English Challenge 3',
          rank: 7,
          prizeAmount: 2000000,
          accountNumber: '8899001122',
          bank: 'BIDV',
          status: 'pending'
        },
        {
          id: 13,
          studentId: 'STU-2024-013',
          fullName: 'Phan VƒÉn Nam',
          school: 'ƒê·∫°i h·ªçc Ngo·∫°i th∆∞∆°ng',
          contest: 'English Challenge 3',
          rank: 8,
          prizeAmount: 2000000,
          accountNumber: '4455667788',
          bank: 'Techcombank',
          status: 'processing'
        },
        {
          id: 14,
          studentId: 'STU-2024-014',
          fullName: 'V√µ Th·ªã Oanh',
          school: 'ƒê·∫°i h·ªçc S∆∞ ph·∫°m H√† N·ªôi',
          contest: 'English Challenge 3',
          rank: 9,
          prizeAmount: 2000000,
          accountNumber: '9900112233',
          bank: 'Vietinbank',
          status: 'pending'
        },
        {
          id: 15,
          studentId: 'STU-2024-015',
          fullName: 'Cao VƒÉn Ph√∫c',
          school: 'ƒê·∫°i h·ªçc C√¥ng ngh·ªá',
          contest: 'English Challenge 3',
          rank: 10,
          prizeAmount: 2000000,
          accountNumber: '1122334455',
          bank: 'ACB',
          status: 'completed'
        }
      ];

      function loadWinners() {
        const tbody = document.getElementById('winnersTableBody');
        if (!tbody) return;

        if (winnersData.length === 0) {
          tbody.innerHTML = `
            <tr>
              <td colspan="11" style="text-align: center; padding: 40px; color: #999;">
                <div style="font-size: 48px; margin-bottom: 16px;">üì≠</div>
                <div>Kh√¥ng c√≥ d·ªØ li·ªáu tr√∫ng th∆∞·ªüng</div>
              </td>
            </tr>
          `;
          return;
        }

        let html = '';
        winnersData.forEach((winner, index) => {
          const statusBadge = getWinnerStatusBadge(winner.status);
          const rankDisplay = winner.rank === 1 ? 'ü•á H·∫°ng 1' : 
                             winner.rank === 2 ? 'ü•à H·∫°ng 2' : 
                             winner.rank === 3 ? 'ü•â H·∫°ng 3' : 
                             `H·∫°ng ${winner.rank}`;
          html += `
            <tr>
              <td>${index + 1}</td>
              <td style="font-family: monospace; font-weight: 600;">${winner.studentId}</td>
              <td style="font-weight: 500;">${winner.fullName}</td>
              <td>${winner.school}</td>
              <td>${winner.contest}</td>
              <td style="font-weight: 600;">${rankDisplay}</td>
              <td style="font-weight: 600; color: #007aff;">${winner.prizeAmount.toLocaleString('vi-VN')} VNƒê</td>
              <td style="font-family: monospace;">${winner.accountNumber}</td>
              <td>${winner.bank}</td>
              <td>${statusBadge}</td>
              <td>
                <div class="action-buttons">
                  <button class="btn-sm btn-view" onclick="viewWinnerDetail(${winner.id})">View</button>
                </div>
              </td>
            </tr>
          `;
        });
        tbody.innerHTML = html;
      }

      function getWinnerStatusBadge(status) {
        const badges = {
          'completed': '<span class="status-badge status-active">ƒê√£ thanh to√°n</span>',
          'processing': '<span class="status-badge status-pending">ƒêang x·ª≠ l√Ω</span>',
          'pending': '<span class="status-badge status-pending">Ch·ªù x·ª≠ l√Ω</span>',
          'cancelled': '<span class="status-badge status-ended">ƒê√£ h·ªßy</span>'
        };
        return badges[status] || '<span class="status-badge status-ended">Unknown</span>';
      }

      function viewWinnerDetail(winnerId) {
        const winner = winnersData.find(w => w.id === winnerId);
        if (!winner) {
          alert('Kh√¥ng t√¨m th·∫•y th√¥ng tin tr√∫ng th∆∞·ªüng!');
          return;
        }

        // Create or update modal content
        let modal = document.getElementById('viewWinnerModal');
        if (!modal) {
          modal = document.createElement('div');
          modal.id = 'viewWinnerModal';
          modal.className = 'modal-overlay';
          modal.innerHTML = `
            <div class="modal" style="max-width: 600px;">
              <div class="modal-header">
                <div class="modal-title">üéÅ Chi ti·∫øt th√¥ng tin tr√∫ng th∆∞·ªüng</div>
                <button class="modal-close" onclick="closeViewWinnerModal()">√ó</button>
              </div>
              <div class="modal-body">
                <div class="form-group">
                  <label class="form-label">M√£ sinh vi√™n</label>
                  <div id="viewWinnerStudentId" style="padding: 10px; background: #f8f9fa; border-radius: 8px; font-family: monospace; font-weight: 600;"></div>
                </div>
                <div class="form-group">
                  <label class="form-label">H·ªç v√† t√™n</label>
                  <div id="viewWinnerFullName" style="padding: 10px; background: #f8f9fa; border-radius: 8px; font-weight: 500;"></div>
                </div>
                <div class="form-group">
                  <label class="form-label">Tr∆∞·ªùng</label>
                  <div id="viewWinnerSchool" style="padding: 10px; background: #f8f9fa; border-radius: 8px;"></div>
                </div>
                <div class="form-group">
                  <label class="form-label">Contest</label>
                  <div id="viewWinnerContest" style="padding: 10px; background: #f8f9fa; border-radius: 8px;"></div>
                </div>
                <div class="form-group">
                  <label class="form-label">H·∫°ng</label>
                  <div id="viewWinnerRank" style="padding: 10px; background: #f8f9fa; border-radius: 8px; font-weight: 600;"></div>
                </div>
                <div class="form-group">
                  <label class="form-label">S·ªë ti·ªÅn th∆∞·ªüng</label>
                  <div id="viewWinnerPrizeAmount" style="padding: 10px; background: #f8f9fa; border-radius: 8px; font-weight: 600; color: #007aff;"></div>
                </div>
                <div class="form-group">
                  <label class="form-label">S·ªë t√†i kho·∫£n</label>
                  <div id="viewWinnerAccountNumber" style="padding: 10px; background: #f8f9fa; border-radius: 8px; font-family: monospace;"></div>
                </div>
                <div class="form-group">
                  <label class="form-label">Ng√¢n h√†ng</label>
                  <div id="viewWinnerBank" style="padding: 10px; background: #f8f9fa; border-radius: 8px;"></div>
                </div>
                <div class="form-group">
                  <label class="form-label">Tr·∫°ng th√°i</label>
                  <div id="viewWinnerStatusDisplay" style="padding: 10px; border-radius: 8px; display: inline-block; font-weight: 500;"></div>
                </div>
              </div>
              <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeViewWinnerModal()">ƒê√≥ng</button>
              </div>
            </div>
          `;
          document.body.appendChild(modal);
        }

        document.getElementById('viewWinnerStudentId').textContent = winner.studentId || '-';
        document.getElementById('viewWinnerFullName').textContent = winner.fullName || '-';
        document.getElementById('viewWinnerSchool').textContent = winner.school || '-';
        document.getElementById('viewWinnerContest').textContent = winner.contest || '-';
        const rankDisplay = winner.rank === 1 ? 'ü•á H·∫°ng 1' : 
                           winner.rank === 2 ? 'ü•à H·∫°ng 2' : 
                           winner.rank === 3 ? 'ü•â H·∫°ng 3' : 
                           `H·∫°ng ${winner.rank}`;
        document.getElementById('viewWinnerRank').textContent = rankDisplay;
        document.getElementById('viewWinnerPrizeAmount').textContent = winner.prizeAmount ? winner.prizeAmount.toLocaleString('vi-VN') + ' VNƒê' : '-';
        document.getElementById('viewWinnerAccountNumber').textContent = winner.accountNumber || '-';
        document.getElementById('viewWinnerBank').textContent = winner.bank || '-';

        const statusDisplay = document.getElementById('viewWinnerStatusDisplay');
        if (winner.status === 'completed') {
          statusDisplay.textContent = 'ƒê√£ thanh to√°n';
          statusDisplay.style.background = '#d4edda';
          statusDisplay.style.color = '#155724';
        } else if (winner.status === 'processing') {
          statusDisplay.textContent = 'ƒêang x·ª≠ l√Ω';
          statusDisplay.style.background = '#fff3cd';
          statusDisplay.style.color = '#856404';
        } else if (winner.status === 'pending') {
          statusDisplay.textContent = 'Ch·ªù x·ª≠ l√Ω';
          statusDisplay.style.background = '#fff3cd';
          statusDisplay.style.color = '#856404';
        } else if (winner.status === 'cancelled') {
          statusDisplay.textContent = 'ƒê√£ h·ªßy';
          statusDisplay.style.background = '#e2e3e5';
          statusDisplay.style.color = '#383d41';
        } else {
          statusDisplay.textContent = 'Unknown';
          statusDisplay.style.background = '#e2e3e5';
          statusDisplay.style.color = '#383d41';
        }

        modal.classList.add('show');
      }

      function closeViewWinnerModal() {
        const modal = document.getElementById('viewWinnerModal');
        if (modal) {
          modal.classList.remove('show');
        }
      }

      function searchWinners() {
        const searchTerm = document.getElementById('searchWinners')?.value.toLowerCase() || '';
        const filterStatus = document.getElementById('filterWinnerStatus')?.value.toLowerCase() || '';
        const filterContest = document.getElementById('filterWinnerContest')?.value.toLowerCase() || '';
        const rows = document.querySelectorAll('#winners table tbody tr');
        
        rows.forEach(row => {
          const text = row.textContent.toLowerCase();
          const matchesSearch = text.includes(searchTerm);
          const matchesStatus = !filterStatus || text.includes(filterStatus);
          const matchesContest = !filterContest || text.includes(filterContest);
          row.style.display = (matchesSearch && matchesStatus && matchesContest) ? '' : 'none';
        });
      }

      function exportWinners() {
        // In a real application, this would export to CSV/Excel
        alert('Xu·∫•t b√°o c√°o danh s√°ch tr√∫ng th∆∞·ªüng...\n\nT√≠nh nƒÉng n√†y s·∫Ω xu·∫•t t·∫•t c·∫£ th√¥ng tin tr√∫ng th∆∞·ªüng ra file CSV.');
        console.log('Exporting winners:', winnersData);
      }

      // Close modals when clicking outside
      document.querySelectorAll(".modal-overlay").forEach(modal => {
        modal.addEventListener("click", function(e) {
          if (e.target === this) {
            this.classList.remove("show");
          }
        });
      });
    </script>
  </body>
</html>

